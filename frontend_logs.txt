MultiSelectDropdown.tsx:171 ✅ MultiSelect: Adding item 28 to selection. New values: [28]
ReportGenerator.tsx:774 🕐 PHASE 2.1: Using debounced updateRelatedProducts (300ms delay)
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 0 products
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: []
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 0 products
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: []
ReportGenerator.tsx:3055 🚫 PHASE 1.2 FIX: Skipping IRR dates fetch - no included products
ReportGenerator.tsx:703 Fetching 1 client groups in parallel...
ReportGenerator.tsx:714 Fetched client group 28: 2 products
ReportGenerator.tsx:744 Parallel fetch complete: 1 client groups processed
ReportGenerator.tsx:754 Total products displayed: 2
ReportGenerator.tsx:755 Client group cache size: 0 groups
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:774 🕐 PHASE 2.1: Using debounced updateRelatedProducts (300ms delay)
ReportGenerator.tsx:3061 📊 Fetching available IRR dates for 2 products
historicalIRRService.ts:143 📊 Attempting to fetch combined historical IRR from: /api/historical-irr/combined/236?limit=1000
historicalIRRService.ts:154 📊 Response status: 200, Content-Type: application/json
historicalIRRService.ts:181 ✅ Combined historical IRR fetched successfully for product 236: {product_id: 236, portfolio_historical_irr: Array(4), funds_historical_irr: Array(2), portfolio_count: 4, funds_count: 2, …}
historicalIRRService.ts:143 📊 Attempting to fetch combined historical IRR from: /api/historical-irr/combined/237?limit=1000
historicalIRRService.ts:154 📊 Response status: 200, Content-Type: application/json
historicalIRRService.ts:181 ✅ Combined historical IRR fetched successfully for product 237: {product_id: 237, portfolio_historical_irr: Array(3), funds_historical_irr: Array(2), portfolio_count: 3, funds_count: 2, …}
ReportGenerator.tsx:2937 Global Top 8 Most Recent Dates: []
ReportGenerator.tsx:2957 Product 236: Selected 0 out of 8 global dates: []
ReportGenerator.tsx:2957 Product 237: Selected 0 out of 8 global dates: []
ReportGenerator.tsx:2960 Select All Results Summary:
ReportGenerator.tsx:2961 Global unique dates selected: 0
ReportGenerator.tsx:2964 Product 236: 0/0 global dates selected
ReportGenerator.tsx:2964 Product 237: 0/0 global dates selected
ReportGenerator.tsx:678 Using cached data for client group 28: 2 products
ReportGenerator.tsx:754 Total products displayed: 2
ReportGenerator.tsx:755 Client group cache size: 1 groups
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:3061 📊 Fetching available IRR dates for 2 products
ReportGenerator.tsx:2937 Global Top 8 Most Recent Dates: (5) ['2023-04-01', '2023-03-01', '2023-02-01', '2023-01-01', '2022-08-01']
ReportGenerator.tsx:2957 Product 236: Selected 4 out of 8 global dates: (4) ['2023-04-01', '2023-03-01', '2023-02-01', '2023-01-01']
ReportGenerator.tsx:2957 Product 237: Selected 3 out of 8 global dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
ReportGenerator.tsx:2960 Select All Results Summary:
ReportGenerator.tsx:2961 Global unique dates selected: 5
ReportGenerator.tsx:2964 Product 236: 4/5 global dates selected
ReportGenerator.tsx:2964 Product 237: 3/5 global dates selected
ReportGenerator.tsx:1312 Report generation validation:
ReportGenerator.tsx:1313 Selected client groups: 1
ReportGenerator.tsx:1314 Selected products: 0
ReportGenerator.tsx:1353 Using fallback valuation date: 2023-02-01 (from IRR dates)
ReportGenerator.tsx:1357 Final valuation date for report: 2023-02-01
ReportGenerator.tsx:1358 IRR dates selected: Yes (3 dates)
ReportGenerator.tsx:1359 Available valuation dates: 0
ReportGenerator.tsx:1415 Unique Product IDs for report: (2) [236, 237]
ReportGenerator.tsx:1448 Fetching historical IRR data for products: (2) [236, 237]
ReportGenerator.tsx:1261 Global selected months: (2) ['2023-02', '2023-01']
ReportGenerator.tsx:1262 Total historical IRR map entries: 4
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:3089 📅 End valuation date changed, filtering IRR dates: 2023-02-01
ReportGenerator.tsx:1450 Historical IRR data fetched: 4 funds with historical data
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:1478 Product Stocks & Shares ISA has 3 portfolio funds: (3) [{…}, {…}, {…}]
ReportGenerator.tsx:1514 Fetching activity logs for 3 portfolio funds: (3) [1107, 1108, 1109]
ReportGenerator.tsx:1521 Retrieved 4 total activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1522 Sample activities: (3) [{…}, {…}, {…}]
valuationDataService.ts:145 🚀 Batch fetching ALL historical valuations for 3 funds (eliminates 3 individual requests)
valuationDataService.ts:164 ✅ Batch historical valuation fetch complete: 12 total valuations for 3 funds
ReportGenerator.tsx:1669 Processing 4 activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1716 Product Stocks & Shares ISA activity totals: {totalInvestment: 300, totalWithdrawal: 40, totalSwitchIn: 0, totalSwitchOut: 0, productStartDate: '2023-01-01', …}
ReportGenerator.tsx:1857 Fund Cash (ID: 1107) has 2 activity logs
ReportGenerator.tsx:1873 Activities for Cash: (2) [{…}, {…}]
ReportGenerator.tsx:1882 Processing activity for Cash: {activity_type: 'Withdrawal', raw_amount: 40, parsed_amount: 40, amount_check: false, amount_absolute: 40, …}
ReportGenerator.tsx:1882 Processing activity for Cash: {activity_type: 'Investment', raw_amount: 100, parsed_amount: 100, amount_check: false, amount_absolute: 100, …}
ReportGenerator.tsx:1931 Fund Cash activity totals: {fundInvestment: 100, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1857 Fund Artemis Income (ID: 1108) has 1 activity logs
ReportGenerator.tsx:1873 Activities for Artemis Income: [{…}]
ReportGenerator.tsx:1882 Processing activity for Artemis Income: {activity_type: 'Investment', raw_amount: 100, parsed_amount: 100, amount_check: false, amount_absolute: 100, …}
ReportGenerator.tsx:1931 Fund Artemis Income activity totals: {fundInvestment: 100, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1857 Fund Aviva BNY Multi-Asset Balanced S2 (ID: 1109) has 1 activity logs
ReportGenerator.tsx:1873 Activities for Aviva BNY Multi-Asset Balanced S2: [{…}]
ReportGenerator.tsx:1882 Processing activity for Aviva BNY Multi-Asset Balanced S2: {activity_type: 'Investment', raw_amount: 100, parsed_amount: 100, amount_check: false, amount_absolute: 100, …}
ReportGenerator.tsx:1931 Fund Aviva BNY Multi-Asset Balanced S2 activity totals: {fundInvestment: 100, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:2009 Calculating standardized IRR for product 236 with fund IDs: (3) [1107, 1108, 1109]
irrDataService.ts:131 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioId: 249, portfolioFundIds: Array(3), endDate: undefined, includeHistorical: false}
irrDataService.ts:141 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
irrDataService.ts:143 📋 [IRR DEBUG] Portfolio ID provided: 249, fetching stored IRR...
irrDataService.ts:44 🔍 [IRR DEBUG] Fetching stored portfolio IRR for portfolio 249
irrDataService.ts:45 🔍 [IRR DEBUG] API endpoint: /api/portfolios/249/latest-irr
irrDataService.ts:49 🔍 [IRR DEBUG] Portfolio IRR API response: {status: 200, data: {…}, hasData: true, irrResult: 48.6, irrResultType: 'number', …}
irrDataService.ts:60 🔍 [IRR DEBUG] Extracted IRR result: 48.6 (type: number)
irrDataService.ts:145 📋 [IRR DEBUG] Stored portfolio IRR result: 48.6
irrDataService.ts:148 ✅ [IRR DEBUG] Using stored portfolio IRR: 48.6% for portfolio 249
irrDataService.ts:160 Retrieved undefined stored fund IRRs
irrDataService.ts:169 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
irrDataService.ts:170 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: false, includeHistorical: false, hasEndDate: false, needsCalculation: undefined, portfolioFundIdsLength: 3}
irrDataService.ts:203 ⏭️ [IRR DEBUG] Skipping IRR calculation - needsCalculation: undefined, fundIds length: 3
irrDataService.ts:213 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: 48.6, fundIRRs: {…}, historicalIRR: null, irrDate: 'latest'}
ReportGenerator.tsx:2063 Optimized IRR for active product 236: 48.6% (source: latest)
ReportGenerator.tsx:2327 - Total fund summaries: 3
ReportGenerator.tsx:2328 - Active funds: 2
ReportGenerator.tsx:2329 - Inactive funds: 1
ReportGenerator.tsx:2330 - All fund statuses: (3) [{…}, {…}, {…}]
ReportGenerator.tsx:2096 🔍 Previous Funds IRR Calculation Debug:
ReportGenerator.tsx:2097 - Inactive funds count: 1
ReportGenerator.tsx:2098 - Inactive funds details: [{…}]
ReportGenerator.tsx:2106 - Extracted inactive fund IDs: [1107]
ReportGenerator.tsx:2118 🚀 Calculating Previous Funds IRR for fund IDs: [1107] with date: undefined
api.ts:607 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(1), irrDate: undefined}
api.ts:608 🔍 DEBUG: portfolioFundIds being sent to backend: [1107]
ReportGenerator.tsx:2126 📊 Previous Funds IRR API Response: {data: {…}, status: 200, statusText: 'OK', headers: AxiosHeaders, config: {…}, …}
ReportGenerator.tsx:2127 📊 Response data: {success: true, irr_percentage: -315.8, irr_decimal: -3.158324403263071, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1), …}
ReportGenerator.tsx:2131 ✅ Previous Funds IRR calculated successfully: -315.8
ReportGenerator.tsx:2147 🎯 Final Previous Funds IRR result: -315.8
ReportGenerator.tsx:2153 🔍 Fetching latest IRRs for individual inactive funds...
ReportGenerator.tsx:2157 ✅ Latest IRRs fetched successfully: [{…}]
ReportGenerator.tsx:2223 🎯 Using net flow weighting for Previous Funds risk
ReportGenerator.tsx:2262 🎯 Previous Funds weighted risk calculation: {totalInactiveFunds: 1, fundsWithRisk: 1, totalInvestment: 100, weightedRisk: '2.0', inactiveFundsData: Array(1)}
ReportGenerator.tsx:2303 🎯 Previous Funds aggregation details: {inactiveFundsCount: 1, totalInvestment: 100, totalRegularInvestment: 0, totalTaxUplift: 0, totalProductSwitchIn: 0, …}
ReportGenerator.tsx:2316 🎯 Created Previous Funds entry with IRR: -315.8
ReportGenerator.tsx:2317 🎯 Created Previous Funds entry with Risk: 2
ReportGenerator.tsx:2318 🎯 Full Previous Funds entry: {id: -1, available_funds_id: -1, fund_name: 'Previous Funds', total_investment: 100, total_regular_investment: 0, …}
ReportGenerator.tsx:1478 Product Stocks & Shares ISA has 2 portfolio funds: (2) [{…}, {…}]
ReportGenerator.tsx:1514 Fetching activity logs for 2 portfolio funds: (2) [1110, 1111]
ReportGenerator.tsx:1521 Retrieved 3 total activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1522 Sample activities: (3) [{…}, {…}, {…}]
valuationDataService.ts:145 🚀 Batch fetching ALL historical valuations for 2 funds (eliminates 2 individual requests)
valuationDataService.ts:164 ✅ Batch historical valuation fetch complete: 6 total valuations for 2 funds
ReportGenerator.tsx:1669 Processing 3 activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1716 Product Stocks & Shares ISA activity totals: {totalInvestment: 320, totalWithdrawal: 0, totalSwitchIn: 0, totalSwitchOut: 0, productStartDate: '2022-08-01', …}
ReportGenerator.tsx:1857 Fund Cash (ID: 1110) has 1 activity logs
ReportGenerator.tsx:1873 Activities for Cash: [{…}]
ReportGenerator.tsx:1882 Processing activity for Cash: {activity_type: 'RegularInvestment', raw_amount: 20, parsed_amount: 20, amount_check: false, amount_absolute: 20, …}
ReportGenerator.tsx:1931 Fund Cash activity totals: {fundInvestment: 20, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1857 Fund Artemis Income (ID: 1111) has 2 activity logs
ReportGenerator.tsx:1873 Activities for Artemis Income: (2) [{…}, {…}]
ReportGenerator.tsx:1882 Processing activity for Artemis Income: {activity_type: 'Investment', raw_amount: 200, parsed_amount: 200, amount_check: false, amount_absolute: 200, …}
ReportGenerator.tsx:1882 Processing activity for Artemis Income: {activity_type: 'Investment', raw_amount: 100, parsed_amount: 100, amount_check: false, amount_absolute: 100, …}
ReportGenerator.tsx:1931 Fund Artemis Income activity totals: {fundInvestment: 300, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:2009 Calculating standardized IRR for product 237 with fund IDs: (2) [1110, 1111]
irrDataService.ts:131 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioId: 250, portfolioFundIds: Array(2), endDate: undefined, includeHistorical: false}
irrDataService.ts:141 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
irrDataService.ts:143 📋 [IRR DEBUG] Portfolio ID provided: 250, fetching stored IRR...
irrDataService.ts:44 🔍 [IRR DEBUG] Fetching stored portfolio IRR for portfolio 250
irrDataService.ts:45 🔍 [IRR DEBUG] API endpoint: /api/portfolios/250/latest-irr
irrDataService.ts:49 🔍 [IRR DEBUG] Portfolio IRR API response: {status: 200, data: {…}, hasData: true, irrResult: -316.1, irrResultType: 'number', …}
irrDataService.ts:60 🔍 [IRR DEBUG] Extracted IRR result: -316.1 (type: number)
irrDataService.ts:145 📋 [IRR DEBUG] Stored portfolio IRR result: -316.1
irrDataService.ts:148 ✅ [IRR DEBUG] Using stored portfolio IRR: -316.1% for portfolio 250
 Retrieved undefined stored fund IRRs
 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: false, includeHistorical: false, hasEndDate: false, needsCalculation: undefined, portfolioFundIdsLength: 2}
 ⏭️ [IRR DEBUG] Skipping IRR calculation - needsCalculation: undefined, fundIds length: 2
 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: -316.1, fundIRRs: {…}, historicalIRR: null, irrDate: 'latest'}
 Optimized IRR for active product 237: -316.1% (source: latest)
 - Total fund summaries: 2
 - Active funds: 2
 - Inactive funds: 0
 - All fund statuses: (2) [{…}, {…}]
 Total portfolio fund IDs collected for IRR calculation: {total: 5, unique: 5, duplicatesRemoved: 0}
 Calculating standardized IRR for portfolio fund IDs: (5) [1107, 1108, 1109, 1110, 1111]
 Using optimized batch IRR service for total IRR: {portfolioFundIds: Array(5), irrDate: undefined}
 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioFundIds: Array(5), endDate: undefined, includeHistorical: false}
 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
 ⚠️ [IRR DEBUG] No portfolio ID provided, skipping stored portfolio IRR lookup
 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
irrDataService.ts:160 Retrieved undefined stored fund IRRs
irrDataService.ts:169 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
irrDataService.ts:170 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: true, includeHistorical: false, hasEndDate: false, needsCalculation: true, portfolioFundIdsLength: 5}
irrDataService.ts:179 🔄 [IRR DEBUG] Calculating IRR due to: {noStoredIRR: true, includeHistorical: false, hasEndDate: false}
irrDataService.ts:95 🔄 [IRR DEBUG] Calculating IRR using standardized endpoint: {portfolioFundIds: Array(5), endDate: undefined}
irrDataService.ts:96 🔍 DEBUG: irrDataService portfolioFundIds being sent: (5) [1107, 1108, 1109, 1110, 1111]
api.ts:607 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(5), irrDate: undefined}
api.ts:608 🔍 DEBUG: portfolioFundIds being sent to backend: (5) [1107, 1108, 1109, 1110, 1111]
irrDataService.ts:106 🔄 [IRR DEBUG] Raw API response from calculateStandardizedMultipleFundsIRR: {success: true, irr_percentage: -62.3, irr_decimal: -0.6229311758554119, calculation_date: '2023-04-01', portfolio_fund_ids: Array(5), …}
irrDataService.ts:118 🔄 [IRR DEBUG] Extracted IRR result: -62.3
irrDataService.ts:190 🔄 [IRR DEBUG] Calculated IRR result: -62.3
irrDataService.ts:195 ✅ [IRR DEBUG] Using calculated IRR as portfolio IRR: -62.3
irrDataService.ts:213 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: -62.3, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
ReportGenerator.tsx:2495 🎯 [TOTAL IRR DEBUG] Optimized total IRR response: {portfolioIRR: -62.3, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
ReportGenerator.tsx:2496 🎯 [TOTAL IRR DEBUG] portfolioIRR field: -62.3
ReportGenerator.tsx:2497 🎯 [TOTAL IRR DEBUG] portfolioIRR type: number
ReportGenerator.tsx:2501 ✅ [TOTAL IRR DEBUG] Optimized total IRR calculation complete: -62.3
ReportGenerator.tsx:2568 🔍 [PRODUCT OWNER ORDER DEBUG] Current productOwnerOrder state: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:2569 🔍 [PRODUCT OWNER ORDER DEBUG] productOwnerOrder length: 2
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 2 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 236, name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 236
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 63, firstname: 'Andrew', surname: 'Plumb', known_as: 'Andrew'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Andrew', surname: 'Plumb', knownAs: 'Andrew'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Andrew Plumb
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Andrew Plumb
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Andrew Plumb
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 237, name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 237
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 43, firstname: 'Gabriella', surname: 'Cuba', known_as: 'Ella'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Gabriella', surname: 'Cuba', knownAs: 'Ella'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Gabriella Cuba
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Gabriella Cuba
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Gabriella Cuba
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportGenerator.tsx:2577 🔍 [PRODUCT OWNER DEBUG - FINAL] Using extractProductOwners with known_as support: (2) ['Andrew Plumb', 'Gabriella Cuba']
ReportDisplayPage.tsx:54 🔍 [REPORT DISPLAY DEBUG] Initializing report data...
ReportDisplayPage.tsx:64 🔍 [REPORT DISPLAY DEBUG] Received report data with 2 products
ReportDisplayPage.tsx:81 🎯 [OPTIMIZATION] Using pre-fetched portfolio IRR values from reportData: {236: 48.6, 237: -316.1}
IRRCalculationService.ts:603 Using pre-selected historical IRR dates from report generation
IRRCalculationService.ts:603 Selected dates: {236: Array(2), 237: Array(3)}
IRRCalculationService.ts:603 Available dates: (5) [{…}, {…}, {…}, {…}, {…}]
IRRCalculationService.ts:603 🔄 [DATA CONSISTENCY] Forcing fresh historical IRR data fetch to match summary table data
IRRCalculationService.ts:603 ⚠️ No pre-fetched historical IRR data available, falling back to API calls
IRRCalculationService.ts:603 Product 236 (Stocks & Shares ISA) selected dates: (2) ['2023-02-01', '2023-01-01']
IRRCalculationService.ts:603 Product 237 (Stocks & Shares ISA) selected dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
ReportContainer.tsx:142 🔍 [REPORT CONTAINER DEBUG] productOwnerDisplay calculation: {customProductOwnerNames: null, reportDataProductOwnerNames: Array(2), reportDataProductOwnerNamesLength: 2}
ReportContainer.tsx:162 🔍 [REPORT CONTAINER DEBUG] Final display result: Andrew Plumb & Gabriella Cuba
ReportContainer.tsx:142 🔍 [REPORT CONTAINER DEBUG] productOwnerDisplay calculation: {customProductOwnerNames: null, reportDataProductOwnerNames: Array(2), reportDataProductOwnerNamesLength: 2}
ReportContainer.tsx:162 🔍 [REPORT CONTAINER DEBUG] Final display result: Andrew Plumb & Gabriella Cuba
SummaryTab.tsx:103 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
SummaryTab.tsx:111 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🎯 [IRR HISTORY] Using actual user-selected dates: (3) ['2022-08-01', '2023-01-01', '2023-02-01']
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 ⚠️ [Previous Funds] No valid dates for product 236 - skipping Previous Funds IRR calculation for existing entry
 🎯 [IRR HISTORY] Using actual user-selected dates: (3) ['2022-08-01', '2023-01-01', '2023-02-01']
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 ⚠️ [Previous Funds] No valid dates for product 236 - skipping Previous Funds IRR calculation for existing entry
 🎯 [IRR SUMMARY MEMOIZATION] ProductIds memoized: {rawLength: 2, memoizedLength: 2, sameReference: true}
 🎯 [IRR SUMMARY MEMOIZATION] SelectedDates memoized: {rawLength: 3, memoizedLength: 3, sameReference: true}
 🔄 [IRR SUMMARY TABLE] useEffect triggered: {productIdsLength: 2, selectedDatesLength: 3, clientGroupIds: undefined, productIds: Array(2), selectedDates: Array(2)}
 🔍 [IRR SUMMARY TABLE] Request details: {productIds: Array(2), uniqueProductIds: Array(2), selectedDates: Array(3), clientGroupIds: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(3), client_group_ids: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(3), client_group_ids: undefined}
 🔍 [GLOBAL IRR REQUEST MANAGER] Processing request: irr_summary_236,237_2022-08-01,2023-01-01,2023-02-01_none
 ✅ [GLOBAL IRR REQUEST MANAGER] Using cached data for: irr_summary_236,237_2022-08-01,2023-01-01,2023-02-01_none
 🔄 [Validation] Computing validated dates for 2 products
 ✅ [Validation] Product 236 has 2 valid dates: (2) ['2023-02-01', '2023-01-01']
 ✅ [Validation] Product 237 has 3 valid dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔍 [IRR HISTORY DEBUG] Component loaded with: {hasReportData: true, productCount: 2, hasIrrHistoryData: true, irrHistoryDataLength: 2, loadingState: {…}, …}
 🔧 [MEMOIZATION DEBUG] ProductIds changed: (2) [236, 237]
 🔧 [MEMOIZATION DEBUG] SelectedDates changed: (3) ['2022-08-01', '2023-01-01', '2023-02-01']
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 3 dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: []
 🔍 [Previous Funds] Analyzing product 236: {productName: 'Stocks & Shares ISA', totalFunds: 3, fundDetails: Array(3)}
 🔍 [Previous Funds] Product 236 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 236 - ALL FUNDS CHECK: {totalFunds: 3, allFundNames: Array(3), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 236 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 236 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 236 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 237: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 237 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 237 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 237 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 ⚠️ [Previous Funds] Skipping product 236 - no valid dates with main product valuation data
 🔍 [Previous Funds] Final state update: {newDataSize: 0, completedProductsCount: 0, completedProducts: Array(0), allCalculatedData: Array(0)}
 ⚠️ [Previous Funds] No data to update - newPreviousFundsIRRData is empty
 🎯 [IRR SUMMARY MEMOIZATION] ProductIds memoized: {rawLength: 2, memoizedLength: 2, sameReference: true}
 🎯 [IRR SUMMARY MEMOIZATION] SelectedDates memoized: {rawLength: 3, memoizedLength: 3, sameReference: true}
 🔄 [IRR SUMMARY TABLE] useEffect triggered: {productIdsLength: 2, selectedDatesLength: 3, clientGroupIds: undefined, productIds: Array(2), selectedDates: Array(2)}
 🔍 [IRR SUMMARY TABLE] Request details: {productIds: Array(2), uniqueProductIds: Array(2), selectedDates: Array(3), clientGroupIds: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(3), client_group_ids: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(3), client_group_ids: undefined}
 🔍 [GLOBAL IRR REQUEST MANAGER] Processing request: irr_summary_236,237_2022-08-01,2023-01-01,2023-02-01_none
 ✅ [GLOBAL IRR REQUEST MANAGER] Using cached data for: irr_summary_236,237_2022-08-01,2023-01-01,2023-02-01_none
 🔄 [Validation] Computing validated dates for 2 products
 ✅ [Validation] Product 236 has 2 valid dates: (2) ['2023-02-01', '2023-01-01']
 ✅ [Validation] Product 237 has 3 valid dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔍 [IRR HISTORY DEBUG] Component loaded with: {hasReportData: true, productCount: 2, hasIrrHistoryData: true, irrHistoryDataLength: 2, loadingState: {…}, …}
 🔧 [MEMOIZATION DEBUG] ProductIds changed: (2) [236, 237]
 🔧 [MEMOIZATION DEBUG] SelectedDates changed: (3) ['2022-08-01', '2023-01-01', '2023-02-01']
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 3 dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: []
 🔍 [Previous Funds] Analyzing product 236: {productName: 'Stocks & Shares ISA', totalFunds: 3, fundDetails: Array(3)}
 🔍 [Previous Funds] Product 236 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 236 - ALL FUNDS CHECK: {totalFunds: 3, allFundNames: Array(3), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 236 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 236 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 236 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 237: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 237 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 237 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 237 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 ⚠️ [Previous Funds] Skipping product 236 - no valid dates with main product valuation data
 🔍 [Previous Funds] Final state update: {newDataSize: 0, completedProductsCount: 0, completedProducts: Array(0), allCalculatedData: Array(0)}
 ⚠️ [Previous Funds] No data to update - newPreviousFundsIRRData is empty
 ✅ [IRR HISTORY SUMMARY] Data fetched successfully: {success: true, data: {…}}
 ✅ [IRR HISTORY SUMMARY] Data fetched successfully: {success: true, data: {…}}
 🔍 [IRR SUMMARY TABLE] Backend response analysis: {productRowsCount: 6, portfolioTotalsCount: 3, productRowsSample: Array(3), uniqueProductIdsInResponse: Array(2), requestedProductIds: Array(2)}
 ✅ [IRR SUMMARY TABLE] Received flat rows from backend: {totalRows: 6, expectedRows: 6, structure: 'flat'}
 🔍 [IRR SUMMARY TABLE] Setting table data: {productRows: Array(6), portfolioTotals: Array(3), dateHeaders: Array(3)}
 🔍 [IRR SUMMARY TABLE] Backend response analysis: {productRowsCount: 6, portfolioTotalsCount: 3, productRowsSample: Array(3), uniqueProductIdsInResponse: Array(2), requestedProductIds: Array(2)}
 ✅ [IRR SUMMARY TABLE] Received flat rows from backend: {totalRows: 6, expectedRows: 6, structure: 'flat'}
 🔍 [IRR SUMMARY TABLE] Setting table data: {productRows: Array(6), portfolioTotals: Array(3), dateHeaders: Array(3)}
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 📊 Portfolio historical IRR fetched for product 236: {product_id: 236, portfolio_historical_irr: Array(4), count: 4}
 Fetched 4 historical IRR records for product 236
 Created 2 portfolio historical IRR records for product 236: (2) [{…}, {…}]
 Created data structure for product 236: {product_id: 236, product_name: 'Stocks & Shares ISA', portfolio_historical_irr: Array(2), funds_historical_irr: Array(3)}
 📊 Portfolio historical IRR fetched for product 237: {product_id: 237, portfolio_historical_irr: Array(3), count: 3}
 Fetched 3 historical IRR records for product 237
 Created 3 portfolio historical IRR records for product 237: (3) [{…}, {…}, {…}]
 Created data structure for product 237: {product_id: 237, product_name: 'Stocks & Shares ISA', portfolio_historical_irr: Array(3), funds_historical_irr: Array(2)}
 Final processed historical IRR data: (2) [{…}, {…}]
 🔍 [IRR HISTORY DEBUG] Processed historical IRR data: {length: 2, sample: {…}}
 🎯 [REPORT DISPLAY] Calculating real-time total IRR for 4 portfolio funds: (4) [1108, 1109, 1111, 1110]
 🎯 [REPORT DISPLAY] Using end date for real-time IRR: undefined
 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioFundIds: Array(4), endDate: undefined, includeHistorical: false}
 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
 ⚠️ [IRR DEBUG] No portfolio ID provided, skipping stored portfolio IRR lookup
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 3 dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
 🔍 [Previous Funds] Analyzing product 236: {productName: 'Stocks & Shares ISA', totalFunds: 3, fundDetails: Array(3)}
 🔍 [Previous Funds] Product 236 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 236 - ALL FUNDS CHECK: {totalFunds: 3, allFundNames: Array(3), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 236 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 236 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 236 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 237: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 237 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 237 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 237 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 🔄 [Previous Funds] Calculating IRR for product 236 with fund IDs: [1107]
 🔄 [Previous Funds] Product 236 valid dates (2): (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
SummaryTab.tsx:103 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
SummaryTab.tsx:111 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
SummaryTab.tsx:103 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
SummaryTab.tsx:111 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
SummaryTab.tsx:103 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(2), productOwnerOrderLength: 2, productNames: Array(2), productOwnerNames: Array(2)}
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
SummaryTab.tsx:111 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 Retrieved undefined stored fund IRRs
 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: true, includeHistorical: false, hasEndDate: false, needsCalculation: true, portfolioFundIdsLength: 4}
 🔄 [IRR DEBUG] Calculating IRR due to: {noStoredIRR: true, includeHistorical: false, hasEndDate: false}
 🔄 [IRR DEBUG] Calculating IRR using standardized endpoint: {portfolioFundIds: Array(4), endDate: undefined}
 🔍 DEBUG: irrDataService portfolioFundIds being sent: (4) [1108, 1109, 1111, 1110]
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔄 [Validation] Computing validated dates for 2 products
 ✅ [Validation] Product 236 has 2 valid dates: (2) ['2023-02-01', '2023-01-01']
 ✅ [Validation] Product 237 has 3 valid dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 3 dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
 🔍 [Previous Funds] Analyzing product 236: {productName: 'Stocks & Shares ISA', totalFunds: 3, fundDetails: Array(3)}
 🔍 [Previous Funds] Product 236 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 236 - ALL FUNDS CHECK: {totalFunds: 3, allFundNames: Array(3), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 236 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 236 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 236 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 237: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 237 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 237 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 237 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 🔄 [Previous Funds] Calculating IRR for product 236 with fund IDs: [1107]
 🔄 [Previous Funds] Product 236 valid dates (2): (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds] Product 236 IRR calculation result: {mapSize: 2, dates: Array(2), values: Array(2), detailedValues: Array(2)}
 ✅ [Previous Funds] Successfully stored IRR data for product 236
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 3 dates: (3) ['2023-02-01', '2023-01-01', '2022-08-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
 🔍 [Previous Funds] Analyzing product 236: {productName: 'Stocks & Shares ISA', totalFunds: 3, fundDetails: Array(3)}
 🔍 [Previous Funds] Product 236 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 236 - ALL FUNDS CHECK: {totalFunds: 3, allFundNames: Array(3), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 236 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 236 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 236 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 236 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 237: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 237 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 237 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 237 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 237 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 🔄 [Previous Funds] Calculating IRR for product 236 with fund IDs: [1107]
 🔄 [Previous Funds] Product 236 valid dates (2): (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1107]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 2 dates: (2) ['2023-02-01', '2023-01-01']
 🔍 [Previous Funds IRR] Calculating for date 2023-02-01 (2023-02-01) with fund IDs: [1107]
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(4), irrDate: undefined}
 🔍 DEBUG: portfolioFundIds being sent to backend: (4) [1108, 1109, 1111, 1110]
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds] Product 236 IRR calculation result: {mapSize: 2, dates: Array(2), values: Array(2), detailedValues: Array(2)}
 ✅ [Previous Funds] Successfully stored IRR data for product 236
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [Previous Funds IRR] API response for 2023-02-01: {success: true, irr_percentage: -126.7, irr_decimal: -1.2668737080010097, calculation_date: '2023-02-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-02-01: -126.7%
 🔍 [Previous Funds IRR] Calculating for date 2023-01-01 (2023-01-01) with fund IDs: [1107]
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
IRRHistorySummaryTable.tsx:429 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
 🔄 [IRR DEBUG] Raw API response from calculateStandardizedMultipleFundsIRR: {success: true, irr_percentage: -37.8, irr_decimal: -0.37839305987553784, calculation_date: '2023-04-01', portfolio_fund_ids: Array(4), …}
 🔄 [IRR DEBUG] Extracted IRR result: -37.8
 🔄 [IRR DEBUG] Calculated IRR result: -37.8
 ✅ [IRR DEBUG] Using calculated IRR as portfolio IRR: -37.8
 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: -37.8, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
 🎯 [REPORT DISPLAY] Real-time total IRR response: {portfolioIRR: -37.8, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
 🎯 [REPORT DISPLAY] Set real-time total IRR: -37.8%
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds IRR] API response for 2023-01-01: {success: true, irr_percentage: -120, irr_decimal: -1.200000000000001, calculation_date: '2023-01-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-01-01: -120%
 🔍 [Previous Funds] Product 236 IRR calculation result: {mapSize: 2, dates: Array(2), values: Array(2), detailedValues: Array(2)}
 ✅ [Previous Funds] Successfully stored IRR data for product 236
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14630
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 3, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [PRODUCT IRR DEBUG] Product 237 - Raw historical IRR data: {productId: 237, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 3, rawRecords: Array(3), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2023-01-01: -367.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 237 storing IRR for date 2022-08-01: -120% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2023-01-01: -367.1% (formatted: -367.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 237 displaying IRR for date 2022-08-01: -120% (formatted: -120.0%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
 🔍 [PRODUCT IRR DEBUG] Product 236 - Raw historical IRR data: {productId: 236, selectedDatesFromReport: Array(2), normalizedSelectedDates: Array(2), rawRecordCount: 2, rawRecords: Array(2), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 236 storing IRR for date 2023-01-01: 40% (from portfolio_historical_irr table)
 ⚠️ [DATE MISMATCH WARNING] Product 236 selected dates not found in database: {missingSelectedDates: Array(1), availableDatesInDatabase: Array(2), selectedDatesFromReport: Array(2), availableButNotSelected: Array(1), suggestion: 'Consider using these available dates: 2023-02-01'}
(anonymous) @ IRRHistoryTab.tsx:2053
(anonymous) @ IRRHistoryTab.tsx:2112
(anonymous) @ IRRHistoryTab.tsx:1496
IRRHistoryTab @ IRRHistoryTab.tsx:2150
renderWithHooks @ chunk-QYFCA5BS.js:11596
updateFunctionComponent @ chunk-QYFCA5BS.js:14635
beginWork @ chunk-QYFCA5BS.js:15972
beginWork$1 @ chunk-QYFCA5BS.js:19806
performUnitOfWork @ chunk-QYFCA5BS.js:19251
workLoopSync @ chunk-QYFCA5BS.js:19190
renderRootSync @ chunk-QYFCA5BS.js:19169
performConcurrentWorkOnRoot @ chunk-QYFCA5BS.js:18728
workLoop @ chunk-QYFCA5BS.js:197
flushWork @ chunk-QYFCA5BS.js:176
performWorkUntilDeadline @ chunk-QYFCA5BS.js:384
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2023-01-01: 40% (formatted: 40.0%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 236 displaying IRR for date 2022-08-01: undefined% (formatted: -)
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
IRRHistorySummaryTable.tsx:429 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 237, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 237, product_name: 'Stocks & Shares ISA', provider_name: 'Aviva', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 237, product_name: 'Stocks & Shares ISA', product_owner_name: 'Gabriella Cuba', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Gabriella Cuba
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Gabriella
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Gabriella
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Aviva - ISA - Gabriella
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-02-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: -316.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-02-01: -316.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2023-01-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: -367.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2023-01-01: -367.1
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 237, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 237, date 2022-08-01: {product_id: 237, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: -120, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 237, date 2022-08-01: -120
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 236, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 236, product_name: 'Stocks & Shares ISA', provider_name: 'Calculus Capital', omitOwner: false}
productTitleUtils.ts:162 🔍 [PRODUCT TITLE DEBUG] About to extract owner nickname...
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 236, product_name: 'Stocks & Shares ISA', product_owner_name: 'Andrew Plumb', product_owners_count: 0}
productTitleUtils.ts:77 🔍 [PRODUCT TITLE DEBUG] Using fallback product_owner_name string: Andrew Plumb
productTitleUtils.ts:88 🔍 [PRODUCT TITLE DEBUG] Using first part of name string: Andrew
productTitleUtils.ts:164 🔍 [PRODUCT TITLE DEBUG] Extracted owner nickname: Andrew
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Calculus Capital - ISA - Andrew
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-02-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-02-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-02-01', irr_result: 58.6, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-02-01: 58.6
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2023-01-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2023-01-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2023-01-01', irr_result: 40, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2023-01-01: 40
IRRHistorySummaryTable.tsx:326 🔍 [IRR SUMMARY DEBUG] Looking for productId: 236, date: 2022-08-01
IRRHistorySummaryTable.tsx:327 🔍 [IRR SUMMARY DEBUG] Available productRows: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Found row for productId 236, date 2022-08-01: {product_id: 236, product_name: 'Stocks & Shares ISA', irr_date: '2022-08-01', irr_result: null, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:347 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 236, date 2022-08-01: null
IRRHistorySummaryTable.tsx:429 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 445, weightedRiskSum: 1750, calculatedRisk: '3.9', productBreakdown: Array(2)}
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-02-01: -125.4% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2023-01-01: -184.3% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:385 📊 [IRR SUMMARY] Using backend IRR for date 2022-08-01: -120% (calculated from portfolios with valuations)
