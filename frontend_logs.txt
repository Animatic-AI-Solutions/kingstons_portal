ReportGenerator.tsx:1312 Report generation validation:
ReportGenerator.tsx:1313 Selected client groups: 1
ReportGenerator.tsx:1314 Selected products: 0
 Using fallback valuation date: 2025-09-01 (from IRR dates)
 Final valuation date for report: 2025-09-01
 IRR dates selected: Yes (8 dates)
 Available valuation dates: 0
 Unique Product IDs for report: (7) [266, 267, 268, 269, 271, 272, 273]
 Fetching historical IRR data for products: (7) [266, 267, 268, 269, 271, 272, 273]
 Global selected months: (6) ['2025-09', '2025-03', '2024-10', '2024-04', '2023-04', '2022-05']
 Total historical IRR map entries: 23
 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
 📅 End valuation date changed, filtering IRR dates: 2025-09-01
 Historical IRR data fetched: 23 funds with historical data
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 266
 ✅ [PRODUCT FILTERING DEBUG] Found product 266: Stocks & Shares ISA
 ✅ [PRODUCT FILTERING DEBUG] Product 266 has portfolio_id: 279
 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
ReportGenerator.tsx:1489 Product Stocks & Shares ISA has 11 portfolio funds: (11) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
ReportGenerator.tsx:1495 ✅ [PRODUCT FILTERING DEBUG] Product 266 proceeding with 11 portfolio funds
ReportGenerator.tsx:1529 Fetching activity logs for 11 portfolio funds: (11) [1323, 1324, 1325, 1326, 1327, 1328, 1329, 1330, 1331, 1332, 1333]
ReportGenerator.tsx:1536 Retrieved 66 total activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1537 Sample activities: (3) [{…}, {…}, {…}]
valuationDataService.ts:145 🚀 Batch fetching ALL historical valuations for 11 funds (eliminates 11 individual requests)
valuationDataService.ts:164 ✅ Batch historical valuation fetch complete: 109 total valuations for 11 funds
 Processing 66 activity logs for product Stocks & Shares ISA
 Product Stocks & Shares ISA activity totals: {totalInvestment: 80854.09000000001, totalWithdrawal: 0, totalSwitchIn: 177652.42, totalSwitchOut: 177652.42, productStartDate: '2012-03-01', …}
 Fund Cash (ID: 1323) has 14 activity logs
 Activities for Cash: (14) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 Processing activity for Cash: {activity_type: 'FundSwitchIn', raw_amount: 315.45, parsed_amount: 315.45, amount_check: false, amount_absolute: 315.45, …}
 Processing activity for Cash: {activity_type: 'FundSwitchIn', raw_amount: 167.28, parsed_amount: 167.28, amount_check: false, amount_absolute: 167.28, …}
 Processing activity for Cash: {activity_type: 'FundSwitchOut', raw_amount: 230.11, parsed_amount: 230.11, amount_check: false, amount_absolute: 230.11, …}
 Processing activity for Cash: {activity_type: 'FundSwitchIn', raw_amount: 311.11, parsed_amount: 311.11, amount_check: false, amount_absolute: 311.11, …}
 Processing activity for Cash: {activity_type: 'FundSwitchOut', raw_amount: 243.2, parsed_amount: 243.2, amount_check: false, amount_absolute: 243.2, …}
 Processing activity for Cash: {activity_type: 'FundSwitchIn', raw_amount: 243.2, parsed_amount: 243.2, amount_check: false, amount_absolute: 243.2, …}
 Processing activity for Cash: {activity_type: 'FundSwitchOut', raw_amount: 3545.47, parsed_amount: 3545.47, amount_check: false, amount_absolute: 3545.47, …}
 Processing activity for Cash: {activity_type: 'FundSwitchIn', raw_amount: 3607.98, parsed_amount: 3607.98, amount_check: false, amount_absolute: 3607.98, …}
 Processing activity for Cash: {activity_type: 'FundSwitchOut', raw_amount: 37655.35, parsed_amount: 37655.35, amount_check: false, amount_absolute: 37655.35, …}
 Processing activity for Cash: {activity_type: 'Investment', raw_amount: 9661.84, parsed_amount: 9661.84, amount_check: false, amount_absolute: 9661.84, …}
 Processing activity for Cash: {activity_type: 'Investment', raw_amount: 28090.7, parsed_amount: 28090.7, amount_check: false, amount_absolute: 28090.7, …}
 Processing activity for Cash: {activity_type: 'FundSwitchOut', raw_amount: 13151.67, parsed_amount: 13151.67, amount_check: false, amount_absolute: 13151.67, …}
ReportGenerator.tsx:1892 Processing activity for Cash: {activity_type: 'Investment', raw_amount: 5108.04, parsed_amount: 5108.04, amount_check: false, amount_absolute: 5108.04, …}
ReportGenerator.tsx:1892 Processing activity for Cash: {activity_type: 'Investment', raw_amount: 8007.73, parsed_amount: 8007.73, amount_check: false, amount_absolute: 8007.73, …}
ReportGenerator.tsx:1941 Fund Cash activity totals: {fundInvestment: 50868.31, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund BNY Mellon Global Income (ID: 1324) has 1 activity logs
ReportGenerator.tsx:1883 Activities for BNY Mellon Global Income: [{…}]
ReportGenerator.tsx:1892 Processing activity for BNY Mellon Global Income: {activity_type: 'FundSwitchIn', raw_amount: 5320.14, parsed_amount: 5320.14, amount_check: false, amount_absolute: 5320.14, …}
ReportGenerator.tsx:1941 Fund BNY Mellon Global Income activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund BNY Mellon Multi-Asset Balanced (ID: 1325) has 2 activity logs
ReportGenerator.tsx:1883 Activities for BNY Mellon Multi-Asset Balanced: (2) [{…}, {…}]
ReportGenerator.tsx:1892 Processing activity for BNY Mellon Multi-Asset Balanced: {activity_type: 'FundSwitchIn', raw_amount: 6543.06, parsed_amount: 6543.06, amount_check: false, amount_absolute: 6543.06, …}
ReportGenerator.tsx:1892 Processing activity for BNY Mellon Multi-Asset Balanced: {activity_type: 'FundSwitchIn', raw_amount: 9603, parsed_amount: 9603, amount_check: false, amount_absolute: 9603, …}
ReportGenerator.tsx:1941 Fund BNY Mellon Multi-Asset Balanced activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund Fidelity UK Smaller Companies (ID: 1326) has 1 activity logs
ReportGenerator.tsx:1883 Activities for Fidelity UK Smaller Companies: [{…}]
ReportGenerator.tsx:1892 Processing activity for Fidelity UK Smaller Companies: {activity_type: 'FundSwitchIn', raw_amount: 4351.66, parsed_amount: 4351.66, amount_check: false, amount_absolute: 4351.66, …}
ReportGenerator.tsx:1941 Fund Fidelity UK Smaller Companies activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund FTF Martin Currie UK Rising Dividends (ID: 1327) has 2 activity logs
ReportGenerator.tsx:1883 Activities for FTF Martin Currie UK Rising Dividends: (2) [{…}, {…}]
ReportGenerator.tsx:1892 Processing activity for FTF Martin Currie UK Rising Dividends: {activity_type: 'FundSwitchIn', raw_amount: 1927.64, parsed_amount: 1927.64, amount_check: false, amount_absolute: 1927.64, …}
ReportGenerator.tsx:1892 Processing activity for FTF Martin Currie UK Rising Dividends: {activity_type: 'FundSwitchIn', raw_amount: 13832.34, parsed_amount: 13832.34, amount_check: false, amount_absolute: 13832.34, …}
ReportGenerator.tsx:1941 Fund FTF Martin Currie UK Rising Dividends activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund RL Sustainable World Trust (ID: 1328) has 4 activity logs
ReportGenerator.tsx:1883 Activities for RL Sustainable World Trust: (4) [{…}, {…}, {…}, {…}]
ReportGenerator.tsx:1892 Processing activity for RL Sustainable World Trust: {activity_type: 'FundSwitchIn', raw_amount: 6866.24, parsed_amount: 6866.24, amount_check: false, amount_absolute: 6866.24, …}
ReportGenerator.tsx:1892 Processing activity for RL Sustainable World Trust: {activity_type: 'FundSwitchIn', raw_amount: 7531.07, parsed_amount: 7531.07, amount_check: false, amount_absolute: 7531.07, …}
ReportGenerator.tsx:1892 Processing activity for RL Sustainable World Trust: {activity_type: 'Investment', raw_amount: 1044.81, parsed_amount: 1044.81, amount_check: false, amount_absolute: 1044.81, …}
ReportGenerator.tsx:1892 Processing activity for RL Sustainable World Trust: {activity_type: 'Investment', raw_amount: 1195.87, parsed_amount: 1195.87, amount_check: false, amount_absolute: 1195.87, …}
ReportGenerator.tsx:1941 Fund RL Sustainable World Trust activity totals: {fundInvestment: 2240.68, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund Stewart Investors Worldwide Leaders  (ID: 1329) has 4 activity logs
ReportGenerator.tsx:1883 Activities for Stewart Investors Worldwide Leaders : (4) [{…}, {…}, {…}, {…}]
ReportGenerator.tsx:1892 Processing activity for Stewart Investors Worldwide Leaders : {activity_type: 'FundSwitchIn', raw_amount: 7015.85, parsed_amount: 7015.85, amount_check: false, amount_absolute: 7015.85, …}
ReportGenerator.tsx:1892 Processing activity for Stewart Investors Worldwide Leaders : {activity_type: 'FundSwitchIn', raw_amount: 7531.07, parsed_amount: 7531.07, amount_check: false, amount_absolute: 7531.07, …}
ReportGenerator.tsx:1892 Processing activity for Stewart Investors Worldwide Leaders : {activity_type: 'Investment', raw_amount: 1044.81, parsed_amount: 1044.81, amount_check: false, amount_absolute: 1044.81, …}
ReportGenerator.tsx:1892 Processing activity for Stewart Investors Worldwide Leaders : {activity_type: 'Investment', raw_amount: 1195.87, parsed_amount: 1195.87, amount_check: false, amount_absolute: 1195.87, …}
ReportGenerator.tsx:1941 Fund Stewart Investors Worldwide Leaders  activity totals: {fundInvestment: 2240.68, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund Historical Funds (ID: 1330) has 26 activity logs
ReportGenerator.tsx:1883 Activities for Historical Funds: (26) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 6543.06, parsed_amount: 6543.06, amount_check: false, amount_absolute: 6543.06, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 20682.76, parsed_amount: 20682.76, amount_check: false, amount_absolute: 20682.76, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 52868.85, parsed_amount: 52868.85, amount_check: false, amount_absolute: 52868.85, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 14244.35, parsed_amount: 14244.35, amount_check: false, amount_absolute: 14244.35, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 13522.9, parsed_amount: 13522.9, amount_check: false, amount_absolute: 13522.9, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 3380.71, parsed_amount: 3380.71, amount_check: false, amount_absolute: 3380.71, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 230.11, parsed_amount: 230.11, amount_check: false, amount_absolute: 230.11, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 243.2, parsed_amount: 243.2, amount_check: false, amount_absolute: 243.2, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 3545.47, parsed_amount: 3545.47, amount_check: false, amount_absolute: 3545.47, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 8417.12, parsed_amount: 8417.12, amount_check: false, amount_absolute: 8417.12, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 8417.12, parsed_amount: 8417.12, amount_check: false, amount_absolute: 8417.12, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 14678.92, parsed_amount: 14678.92, amount_check: false, amount_absolute: 14678.92, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 14678.92, parsed_amount: 14678.92, amount_check: false, amount_absolute: 14678.92, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 17698.01, parsed_amount: 17698.01, amount_check: false, amount_absolute: 17698.01, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 2455.29, parsed_amount: 2455.29, amount_check: false, amount_absolute: 2455.29, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 2810.3, parsed_amount: 2810.3, amount_check: false, amount_absolute: 2810.3, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 11887.2, parsed_amount: 11887.2, amount_check: false, amount_absolute: 11887.2, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 1467.99, parsed_amount: 1467.99, amount_check: false, amount_absolute: 1467.99, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchOut', raw_amount: 1467.99, parsed_amount: 1467.99, amount_check: false, amount_absolute: 1467.99, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'FundSwitchIn', raw_amount: 13151.67, parsed_amount: 13151.67, amount_check: false, amount_absolute: 13151.67, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1892 Processing activity for Historical Funds: {activity_type: 'Investment', raw_amount: 890, parsed_amount: 890, amount_check: false, amount_absolute: 890, …}
ReportGenerator.tsx:1941 Fund Historical Funds activity totals: {fundInvestment: 22492.79, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund Vanguard Life Strategy 80% Equity A Acc (ID: 1331) has 1 activity logs
ReportGenerator.tsx:1883 Activities for Vanguard Life Strategy 80% Equity A Acc: [{…}]
ReportGenerator.tsx:1892 Processing activity for Vanguard Life Strategy 80% Equity A Acc: {activity_type: 'FundSwitchIn', raw_amount: 4800.46, parsed_amount: 4800.46, amount_check: false, amount_absolute: 4800.46, …}
ReportGenerator.tsx:1941 Fund Vanguard Life Strategy 80% Equity A Acc activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund Vanguard Life Strategy 40% Equity A Acc (ID: 1332) has 2 activity logs
ReportGenerator.tsx:1883 Activities for Vanguard Life Strategy 40% Equity A Acc: (2) [{…}, {…}]
ReportGenerator.tsx:1892 Processing activity for Vanguard Life Strategy 40% Equity A Acc: {activity_type: 'FundSwitchIn', raw_amount: 5589.93, parsed_amount: 5589.93, amount_check: false, amount_absolute: 5589.93, …}
ReportGenerator.tsx:1892 Processing activity for Vanguard Life Strategy 40% Equity A Acc: {activity_type: 'FundSwitchIn', raw_amount: 10142.19, parsed_amount: 10142.19, amount_check: false, amount_absolute: 10142.19, …}
ReportGenerator.tsx:1941 Fund Vanguard Life Strategy 40% Equity A Acc activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund LF Equity Income  (ID: 1333) has 9 activity logs
ReportGenerator.tsx:1883 Activities for LF Equity Income : (9) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchOut', raw_amount: 315.45, parsed_amount: 315.45, amount_check: false, amount_absolute: 315.45, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchOut', raw_amount: 167.28, parsed_amount: 167.28, amount_check: false, amount_absolute: 167.28, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchOut', raw_amount: 311.11, parsed_amount: 311.11, amount_check: false, amount_absolute: 311.11, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchOut', raw_amount: 243.2, parsed_amount: 243.2, amount_check: false, amount_absolute: 243.2, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchOut', raw_amount: 3607.98, parsed_amount: 3607.98, amount_check: false, amount_absolute: 3607.98, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'FundSwitchIn', raw_amount: 4895.2, parsed_amount: 4895.2, amount_check: false, amount_absolute: 4895.2, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'Investment', raw_amount: 679.13, parsed_amount: 679.13, amount_check: false, amount_absolute: 679.13, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'Investment', raw_amount: 777.32, parsed_amount: 777.32, amount_check: false, amount_absolute: 777.32, …}
ReportGenerator.tsx:1892 Processing activity for LF Equity Income : {activity_type: 'Investment', raw_amount: 1555.18, parsed_amount: 1555.18, amount_check: false, amount_absolute: 1555.18, …}
ReportGenerator.tsx:1941 Fund LF Equity Income  activity totals: {fundInvestment: 3011.63, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:2019 Calculating standardized IRR for product 266 with fund IDs: (11) [1323, 1324, 1325, 1326, 1327, 1328, 1329, 1330, 1331, 1332, 1333]
irrDataService.ts:131 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioId: 279, portfolioFundIds: Array(11), endDate: undefined, includeHistorical: false}
irrDataService.ts:141 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
irrDataService.ts:143 📋 [IRR DEBUG] Portfolio ID provided: 279, fetching stored IRR...
irrDataService.ts:44 🔍 [IRR DEBUG] Fetching stored portfolio IRR for portfolio 279
irrDataService.ts:45 🔍 [IRR DEBUG] API endpoint: /api/portfolios/279/latest-irr
irrDataService.ts:49 🔍 [IRR DEBUG] Portfolio IRR API response: {status: 200, data: {…}, hasData: true, irrResult: 4.4, irrResultType: 'number', …}
irrDataService.ts:60 🔍 [IRR DEBUG] Extracted IRR result: 4.4 (type: number)
irrDataService.ts:145 📋 [IRR DEBUG] Stored portfolio IRR result: 4.4
irrDataService.ts:148 ✅ [IRR DEBUG] Using stored portfolio IRR: 4.4% for portfolio 279
irrDataService.ts:160 Retrieved undefined stored fund IRRs
irrDataService.ts:169 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
irrDataService.ts:170 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: false, includeHistorical: false, hasEndDate: false, needsCalculation: undefined, portfolioFundIdsLength: 11}
irrDataService.ts:203 ⏭️ [IRR DEBUG] Skipping IRR calculation - needsCalculation: undefined, fundIds length: 11
irrDataService.ts:213 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: 4.4, fundIRRs: {…}, historicalIRR: null, irrDate: 'latest'}
ReportGenerator.tsx:2073 Optimized IRR for active product 266: 4.4% (source: latest)
ReportGenerator.tsx:2337 - Total fund summaries: 11
ReportGenerator.tsx:2338 - Active funds: 10
ReportGenerator.tsx:2339 - Inactive funds: 1
ReportGenerator.tsx:2340 - All fund statuses: (11) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
ReportGenerator.tsx:2106 🔍 Previous Funds IRR Calculation Debug:
ReportGenerator.tsx:2107 - Inactive funds count: 1
ReportGenerator.tsx:2108 - Inactive funds details: [{…}]
ReportGenerator.tsx:2116 - Extracted inactive fund IDs: [1330]
ReportGenerator.tsx:2128 🚀 Calculating Previous Funds IRR for fund IDs: [1330] with date: undefined
api.ts:607 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(1), irrDate: undefined}
api.ts:608 🔍 DEBUG: portfolioFundIds being sent to backend: [1330]
ReportGenerator.tsx:2136 📊 Previous Funds IRR API Response: {data: {…}, status: 200, statusText: 'OK', headers: AxiosHeaders, config: {…}, …}
ReportGenerator.tsx:2137 📊 Response data: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1), …}
ReportGenerator.tsx:2141 ✅ Previous Funds IRR calculated successfully: 4.4
ReportGenerator.tsx:2157 🎯 Final Previous Funds IRR result: 4.4
ReportGenerator.tsx:2163 🔍 Fetching latest IRRs for individual inactive funds...
ReportGenerator.tsx:2167 ✅ Latest IRRs fetched successfully: [{…}]
ReportGenerator.tsx:2233 🎯 Using net flow weighting for Previous Funds risk
ReportGenerator.tsx:2272 🎯 Previous Funds weighted risk calculation: {totalInactiveFunds: 1, fundsWithRisk: 1, totalInvestment: 22492.79, weightedRisk: '5.0', inactiveFundsData: Array(1)}
ReportGenerator.tsx:2313 🎯 Previous Funds aggregation details: {inactiveFundsCount: 1, totalInvestment: 22492.79, totalRegularInvestment: 0, totalTaxUplift: 0, totalProductSwitchIn: 0, …}
ReportGenerator.tsx:2326 🎯 Created Previous Funds entry with IRR: 4.4
ReportGenerator.tsx:2327 🎯 Created Previous Funds entry with Risk: 5
ReportGenerator.tsx:2328 🎯 Full Previous Funds entry: {id: -1, available_funds_id: -1, fund_name: 'Previous Funds', total_investment: 22492.79, total_regular_investment: 0, …}
ReportGenerator.tsx:2388 ✅ [PRODUCT FILTERING DEBUG] Adding product 266 (Stocks & Shares ISA) to final results
ReportGenerator.tsx:1469 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 267
ReportGenerator.tsx:1477 ✅ [PRODUCT FILTERING DEBUG] Found product 267: Stocks & Shares ISA
ReportGenerator.tsx:1484 ✅ [PRODUCT FILTERING DEBUG] Product 267 has portfolio_id: 280
ReportGenerator.tsx:1489 Product Stocks & Shares ISA has 2 portfolio funds: (2) [{…}, {…}]
ReportGenerator.tsx:1495 ✅ [PRODUCT FILTERING DEBUG] Product 267 proceeding with 2 portfolio funds
ReportGenerator.tsx:1529 Fetching activity logs for 2 portfolio funds: (2) [1334, 1335]
ReportGenerator.tsx:1536 Retrieved 3 total activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1537 Sample activities: (3) [{…}, {…}, {…}]
valuationDataService.ts:145 🚀 Batch fetching ALL historical valuations for 2 funds (eliminates 2 individual requests)
valuationDataService.ts:164 ✅ Batch historical valuation fetch complete: 16 total valuations for 2 funds
ReportGenerator.tsx:1684 Processing 3 activity logs for product Stocks & Shares ISA
ReportGenerator.tsx:1731 Product Stocks & Shares ISA activity totals: {totalInvestment: 20000, totalWithdrawal: 25922.68, totalSwitchIn: 0, totalSwitchOut: 0, productStartDate: '2019-05-01', …}
ReportGenerator.tsx:1867 Fund Cash (ID: 1334) has 1 activity logs
ReportGenerator.tsx:1883 Activities for Cash: [{…}]
ReportGenerator.tsx:1892 Processing activity for Cash: {activity_type: 'Withdrawal', raw_amount: 0, parsed_amount: 0, amount_check: true, amount_absolute: 0, …}
ReportGenerator.tsx:1941 Fund Cash activity totals: {fundInvestment: 0, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:1867 Fund PruFund Growth ISA (ID: 1335) has 2 activity logs
ReportGenerator.tsx:1883 Activities for PruFund Growth ISA: (2) [{…}, {…}]
ReportGenerator.tsx:1892 Processing activity for PruFund Growth ISA: {activity_type: 'Withdrawal', raw_amount: 25922.68, parsed_amount: 25922.68, amount_check: false, amount_absolute: 25922.68, …}
ReportGenerator.tsx:1892 Processing activity for PruFund Growth ISA: {activity_type: 'Investment', raw_amount: 20000, parsed_amount: 20000, amount_check: false, amount_absolute: 20000, …}
ReportGenerator.tsx:1941 Fund PruFund Growth ISA activity totals: {fundInvestment: 20000, fundRegularInvestment: 0, fundTaxUplift: 0, fundProductSwitchIn: 0, fundProductSwitchOut: 0, …}
ReportGenerator.tsx:2019 Calculating standardized IRR for product 267 with fund IDs: (2) [1334, 1335]
irrDataService.ts:131 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioId: 280, portfolioFundIds: Array(2), endDate: undefined, includeHistorical: false}
irrDataService.ts:141 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
irrDataService.ts:143 📋 [IRR DEBUG] Portfolio ID provided: 280, fetching stored IRR...
irrDataService.ts:44 🔍 [IRR DEBUG] Fetching stored portfolio IRR for portfolio 280
irrDataService.ts:45 🔍 [IRR DEBUG] API endpoint: /api/portfolios/280/latest-irr
irrDataService.ts:49 🔍 [IRR DEBUG] Portfolio IRR API response: {status: 200, data: {…}, hasData: true, irrResult: 4.2, irrResultType: 'number', …}
irrDataService.ts:60 🔍 [IRR DEBUG] Extracted IRR result: 4.2 (type: number)
irrDataService.ts:145 📋 [IRR DEBUG] Stored portfolio IRR result: 4.2
irrDataService.ts:148 ✅ [IRR DEBUG] Using stored portfolio IRR: 4.2% for portfolio 280
 Retrieved undefined stored fund IRRs
 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: false, includeHistorical: false, hasEndDate: false, needsCalculation: undefined, portfolioFundIdsLength: 2}
 ⏭️ [IRR DEBUG] Skipping IRR calculation - needsCalculation: undefined, fundIds length: 2
 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: 4.2, fundIRRs: {…}, historicalIRR: null, irrDate: 'latest'}
 Optimized IRR for active product 267: 4.2% (source: latest)
 - Total fund summaries: 2
 - Active funds: 2
 - Inactive funds: 0
 - All fund statuses: (2) [{…}, {…}]
 ✅ [PRODUCT FILTERING DEBUG] Adding product 267 (Stocks & Shares ISA) to final results
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 268
 ❌ [PRODUCT FILTERING DEBUG] Product 268 not found in comprehensiveProductList
 🔍 [PRODUCT FILTERING DEBUG] Available product IDs in comprehensiveProductList: (100) [3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 36, 37, 38, 39, 168, 170, 177, 181, 183, 184, 185, 187, 192, 193, 195, 196, 197, 198, 199, 204, 205, 206, 207, 208, 209, 210, 212, 215, 216, 217, 218, 219, 220, 221, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 259, 260, 261, 262, 263, 264, 265, 266, 267]
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 269
 ❌ [PRODUCT FILTERING DEBUG] Product 269 not found in comprehensiveProductList
 🔍 [PRODUCT FILTERING DEBUG] Available product IDs in comprehensiveProductList: (100) [3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 36, 37, 38, 39, 168, 170, 177, 181, 183, 184, 185, 187, 192, 193, 195, 196, 197, 198, 199, 204, 205, 206, 207, 208, 209, 210, 212, 215, 216, 217, 218, 219, 220, 221, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 259, 260, 261, 262, 263, 264, 265, 266, 267]
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 271
 ❌ [PRODUCT FILTERING DEBUG] Product 271 not found in comprehensiveProductList
 🔍 [PRODUCT FILTERING DEBUG] Available product IDs in comprehensiveProductList: (100) [3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 36, 37, 38, 39, 168, 170, 177, 181, 183, 184, 185, 187, 192, 193, 195, 196, 197, 198, 199, 204, 205, 206, 207, 208, 209, 210, 212, 215, 216, 217, 218, 219, 220, 221, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 259, 260, 261, 262, 263, 264, 265, 266, 267]
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 272
 ❌ [PRODUCT FILTERING DEBUG] Product 272 not found in comprehensiveProductList
 🔍 [PRODUCT FILTERING DEBUG] Available product IDs in comprehensiveProductList: (100) [3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 36, 37, 38, 39, 168, 170, 177, 181, 183, 184, 185, 187, 192, 193, 195, 196, 197, 198, 199, 204, 205, 206, 207, 208, 209, 210, 212, 215, 216, 217, 218, 219, 220, 221, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 259, 260, 261, 262, 263, 264, 265, 266, 267]
 🔍 [PRODUCT FILTERING DEBUG] Processing product ID: 273
 ❌ [PRODUCT FILTERING DEBUG] Product 273 not found in comprehensiveProductList
 🔍 [PRODUCT FILTERING DEBUG] Available product IDs in comprehensiveProductList: (100) [3, 4, 5, 6, 7, 8, 9, 12, 13, 14, 15, 16, 19, 20, 21, 22, 23, 24, 25, 27, 28, 29, 30, 31, 33, 34, 36, 37, 38, 39, 168, 170, 177, 181, 183, 184, 185, 187, 192, 193, 195, 196, 197, 198, 199, 204, 205, 206, 207, 208, 209, 210, 212, 215, 216, 217, 218, 219, 220, 221, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 259, 260, 261, 262, 263, 264, 265, 266, 267]
 🔍 [PRODUCT FILTERING DEBUG] Final summary: 2 products made it to results out of 7 selected
 🔍 [PRODUCT FILTERING DEBUG] Products in results: (2) [{…}, {…}]
 Total portfolio fund IDs collected for IRR calculation: {total: 13, unique: 13, duplicatesRemoved: 0}
 Calculating standardized IRR for portfolio fund IDs: (13) [1323, 1324, 1325, 1326, 1327, 1328, 1329, 1330, 1331, 1332, 1333, 1334, 1335]
 Using optimized batch IRR service for total IRR: {portfolioFundIds: Array(13), irrDate: undefined}
 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioFundIds: Array(13), endDate: undefined, includeHistorical: false}
 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
 ⚠️ [IRR DEBUG] No portfolio ID provided, skipping stored portfolio IRR lookup
 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
irrDataService.ts:160 Retrieved undefined stored fund IRRs
irrDataService.ts:169 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
irrDataService.ts:170 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: true, includeHistorical: false, hasEndDate: false, needsCalculation: true, portfolioFundIdsLength: 13}
irrDataService.ts:179 🔄 [IRR DEBUG] Calculating IRR due to: {noStoredIRR: true, includeHistorical: false, hasEndDate: false}
irrDataService.ts:95 🔄 [IRR DEBUG] Calculating IRR using standardized endpoint: {portfolioFundIds: Array(13), endDate: undefined}
irrDataService.ts:96 🔍 DEBUG: irrDataService portfolioFundIds being sent: (13) [1323, 1324, 1325, 1326, 1327, 1328, 1329, 1330, 1331, 1332, 1333, 1334, 1335]
api.ts:607 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(13), irrDate: undefined}
api.ts:608 🔍 DEBUG: portfolioFundIds being sent to backend: (13) [1323, 1324, 1325, 1326, 1327, 1328, 1329, 1330, 1331, 1332, 1333, 1334, 1335]
irrDataService.ts:106 🔄 [IRR DEBUG] Raw API response from calculateStandardizedMultipleFundsIRR: {success: true, irr_percentage: 4.3, irr_decimal: 0.04344807641799253, calculation_date: '2025-09-01', portfolio_fund_ids: Array(13), …}
irrDataService.ts:118 🔄 [IRR DEBUG] Extracted IRR result: 4.3
irrDataService.ts:190 🔄 [IRR DEBUG] Calculated IRR result: 4.3
irrDataService.ts:195 ✅ [IRR DEBUG] Using calculated IRR as portfolio IRR: 4.3
irrDataService.ts:213 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: 4.3, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
ReportGenerator.tsx:2515 🎯 [TOTAL IRR DEBUG] Optimized total IRR response: {portfolioIRR: 4.3, fundIRRs: {…}, historicalIRR: null, irrDate: 'calculated'}
ReportGenerator.tsx:2516 🎯 [TOTAL IRR DEBUG] portfolioIRR field: 4.3
ReportGenerator.tsx:2517 🎯 [TOTAL IRR DEBUG] portfolioIRR type: number
ReportGenerator.tsx:2521 ✅ [TOTAL IRR DEBUG] Optimized total IRR calculation complete: 4.3
ReportGenerator.tsx:2588 🔍 [PRODUCT OWNER ORDER DEBUG] Current productOwnerOrder state: ['Mary Morrison']
ReportGenerator.tsx:2589 🔍 [PRODUCT OWNER ORDER DEBUG] productOwnerOrder length: 1
ReportGenerator.tsx:433 🔍 [EXTRACT OWNERS DEBUG] Starting extraction for 7 products
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 1: {id: 266, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 266
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 2: {id: 267, name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 267
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 3: {id: 268, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 268
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 4: {id: 269, name: 'Flexible Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 269
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 5: {id: 271, name: 'Investment Plan', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 271
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 6: {id: 272, name: 'With Profits Bond', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 272
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:436 🔍 [EXTRACT OWNERS DEBUG] Product 7: {id: 273, name: 'Flexible Transitions Account', product_owner_name: 'Mary Morrison', product_owners_array: Array(1), product_owners_count: 1}
ReportGenerator.tsx:449 🔍 [EXTRACT OWNERS DEBUG] Using Method 2 (product_owners array) for product 273
ReportGenerator.tsx:451 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Owner 1: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:20 🔍 [PRODUCT OWNER UTILS DEBUG] Input owner (formal): {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productOwnerUtils.ts:31 🔍 [PRODUCT OWNER UTILS DEBUG] Processed fields (formal): {firstname: 'Mary', surname: 'Morrison', knownAs: 'Mary'}
productOwnerUtils.ts:40 🔍 [PRODUCT OWNER UTILS DEBUG] Using Priority 1 (firstname + surname): Mary Morrison
ReportGenerator.tsx:460 🔍 [EXTRACT OWNERS DEBUG] Method 2 - getProductOwnerFormalDisplayName result: Mary Morrison
ReportGenerator.tsx:463 🔍 [EXTRACT OWNERS DEBUG] Method 2 - Adding name: Mary Morrison
ReportGenerator.tsx:482 🔍 [EXTRACT OWNERS DEBUG] Final result: ['Mary Morrison']
ReportGenerator.tsx:2597 🔍 [PRODUCT OWNER DEBUG - FINAL] Using extractProductOwners with known_as support: ['Mary Morrison']
 🔍 [REPORT DISPLAY DEBUG] Initializing report data...
 🔍 [REPORT DISPLAY DEBUG] Received report data with 2 products
 🎯 [OPTIMIZATION] Using pre-fetched portfolio IRR values from reportData: {266: 4.4, 267: 4.2}
 Using pre-selected historical IRR dates from report generation
 Selected dates: {266: Array(6), 267: Array(6), 268: Array(4), 269: Array(2), 271: Array(2), 272: Array(2), 273: Array(5)}
 Available dates: (12) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔄 [DATA CONSISTENCY] Forcing fresh historical IRR data fetch to match summary table data
 ⚠️ No pre-fetched historical IRR data available, falling back to API calls
 Product 266 (Stocks & Shares ISA) selected dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 Product 267 (Stocks & Shares ISA) selected dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [REPORT CONTAINER DEBUG] productOwnerDisplay calculation: {customProductOwnerNames: null, reportDataProductOwnerNames: Array(1), reportDataProductOwnerNamesLength: 1}
 🔍 [REPORT CONTAINER DEBUG] Final display result: Mary Morrison
 🔍 [REPORT CONTAINER DEBUG] productOwnerDisplay calculation: {customProductOwnerNames: null, reportDataProductOwnerNames: Array(1), reportDataProductOwnerNamesLength: 1}
 🔍 [REPORT CONTAINER DEBUG] Final display result: Mary Morrison
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🎯 [IRR HISTORY] Using actual user-selected dates: (8) ['2022-05-01', '2022-07-01', '2023-03-01', '2023-04-01', '2024-04-01', '2024-10-01', '2025-03-01', '2025-09-01']
 🎯 [IRR HISTORY] Using per-product date selections: {266: Array(6), 267: Array(6), 268: Array(4), 269: Array(2), 271: Array(2), 272: Array(2), 273: Array(5)}
 🔍 [VALUATION DATE FILTER] Processing historical dates filter: {currentValuationDate: '2025-09-01', memoizedSelectedDates: Array(8), memoizedPerProductDates: {…}}
 🔍 [VALUATION DATE FILTER] Removed current valuation date from historical columns: {currentValuationDate: '2025-09-01', originalDates: Array(8), filteredHistoricalDates: Array(7), removedCount: 1}
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 ⚠️ [Previous Funds] No valid dates for product 266 - skipping Previous Funds IRR calculation for existing entry
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🎯 [IRR HISTORY] Using actual user-selected dates: (8) ['2022-05-01', '2022-07-01', '2023-03-01', '2023-04-01', '2024-04-01', '2024-10-01', '2025-03-01', '2025-09-01']
 🎯 [IRR HISTORY] Using per-product date selections: {266: Array(6), 267: Array(6), 268: Array(4), 269: Array(2), 271: Array(2), 272: Array(2), 273: Array(5)}
 🔍 [VALUATION DATE FILTER] Processing historical dates filter: {currentValuationDate: '2025-09-01', memoizedSelectedDates: Array(8), memoizedPerProductDates: {…}}
 🔍 [VALUATION DATE FILTER] Removed current valuation date from historical columns: {currentValuationDate: '2025-09-01', originalDates: Array(8), filteredHistoricalDates: Array(7), removedCount: 1}
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 ⚠️ [Previous Funds] No valid dates for product 266 - skipping Previous Funds IRR calculation for existing entry
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🎯 [IRR SUMMARY MEMOIZATION] ProductIds memoized: {rawLength: 2, memoizedLength: 2, sameReference: true}
 🎯 [IRR SUMMARY MEMOIZATION] SelectedDates memoized: {rawLength: 8, memoizedLength: 8, sameReference: true}
 🔄 [IRR SUMMARY TABLE] useEffect triggered: {productIdsLength: 2, selectedDatesLength: 8, clientGroupIds: undefined, productIds: Array(2), selectedDates: Array(2)}
 🔍 [IRR SUMMARY TABLE] Request details: {productIds: Array(2), uniqueProductIds: Array(2), selectedDates: Array(8), clientGroupIds: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(8), client_group_ids: undefined}
 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(8), client_group_ids: undefined}
 🔍 [GLOBAL IRR REQUEST MANAGER] Processing request: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
 ⏰ [GLOBAL IRR REQUEST MANAGER] Cache expired for: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
 🚀 [GLOBAL IRR REQUEST MANAGER] Starting new request: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
 🔄 [Validation] Computing validated dates for 2 products
 ✅ [Validation] Product 266 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 ✅ [Validation] Product 267 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:122 🔍 [IRR HISTORY DEBUG] Component loaded with: {hasReportData: true, productCount: 2, hasIrrHistoryData: true, irrHistoryDataLength: 2, loadingState: {…}, …}
IRRHistoryTab.tsx:234 🔧 [MEMOIZATION DEBUG] ProductIds changed: (2) [266, 267]
IRRHistoryTab.tsx:237 🔧 [MEMOIZATION DEBUG] SelectedDates changed: (8) ['2022-05-01', '2022-07-01', '2023-03-01', '2023-04-01', '2024-04-01', '2024-10-01', '2025-03-01', '2025-09-01']
IRRHistoryTab.tsx:777 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
IRRHistoryTab.tsx:801 🔄 [Previous Funds] Starting calculation with 8 dates: (8) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01', '2022-07-01', '2023-03-01']
IRRHistoryTab.tsx:802 🔄 [Previous Funds] Using pre-computed validated dates for products: []
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 266: {productName: 'Stocks & Shares ISA', totalFunds: 11, fundDetails: Array(11)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 266 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 266 - ALL FUNDS CHECK: {totalFunds: 11, allFundNames: Array(11), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 266 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 266 historical funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 266 total dynamic funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:894 🔍 [Previous Funds] Product 266 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
IRRHistoryTab.tsx:945 🔍 [Previous Funds] Product 266 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 267: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 267 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 267 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 267 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 267 historical funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 267 total dynamic funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:959 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
IRRHistoryTab.tsx:969 🔄 [Previous Funds] Starting IRR calculations for 1 products
IRRHistoryTab.tsx:980 ⚠️ [Previous Funds] Skipping product 266 - no valid dates with main product valuation data
IRRHistoryTab.tsx:1010 🔍 [Previous Funds] Final state update: {newDataSize: 0, completedProductsCount: 0, completedProducts: Array(0), allCalculatedData: Array(0)}
IRRHistoryTab.tsx:1027 ⚠️ [Previous Funds] No data to update - newPreviousFundsIRRData is empty
IRRHistorySummaryTable.tsx:74 🎯 [IRR SUMMARY MEMOIZATION] ProductIds memoized: {rawLength: 2, memoizedLength: 2, sameReference: true}
IRRHistorySummaryTable.tsx:82 🎯 [IRR SUMMARY MEMOIZATION] SelectedDates memoized: {rawLength: 8, memoizedLength: 8, sameReference: true}
IRRHistorySummaryTable.tsx:249 🔄 [IRR SUMMARY TABLE] useEffect triggered: {productIdsLength: 2, selectedDatesLength: 8, clientGroupIds: undefined, productIds: Array(2), selectedDates: Array(2)}
IRRHistorySummaryTable.tsx:278 🔍 [IRR SUMMARY TABLE] Request details: {productIds: Array(2), uniqueProductIds: Array(2), selectedDates: Array(8), clientGroupIds: undefined}
IRRHistorySummaryTable.tsx:291 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(8), client_group_ids: undefined}
irrHistorySummaryService.ts:167 🔍 [IRR HISTORY SUMMARY] Fetching data with request: {product_ids: Array(2), selected_dates: Array(8), client_group_ids: undefined}
irrHistorySummaryService.ts:96 🔍 [GLOBAL IRR REQUEST MANAGER] Processing request: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
irrHistorySummaryService.ts:112 🔄 [GLOBAL IRR REQUEST MANAGER] Request already in progress, waiting for existing request: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
IRRHistoryTab.tsx:92 🔄 [Validation] Computing validated dates for 2 products
IRRHistoryTab.tsx:113 ✅ [Validation] Product 266 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:113 ✅ [Validation] Product 267 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:122 🔍 [IRR HISTORY DEBUG] Component loaded with: {hasReportData: true, productCount: 2, hasIrrHistoryData: true, irrHistoryDataLength: 2, loadingState: {…}, …}
IRRHistoryTab.tsx:234 🔧 [MEMOIZATION DEBUG] ProductIds changed: (2) [266, 267]
IRRHistoryTab.tsx:237 🔧 [MEMOIZATION DEBUG] SelectedDates changed: (8) ['2022-05-01', '2022-07-01', '2023-03-01', '2023-04-01', '2024-04-01', '2024-10-01', '2025-03-01', '2025-09-01']
IRRHistoryTab.tsx:777 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
IRRHistoryTab.tsx:801 🔄 [Previous Funds] Starting calculation with 8 dates: (8) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01', '2022-07-01', '2023-03-01']
IRRHistoryTab.tsx:802 🔄 [Previous Funds] Using pre-computed validated dates for products: []
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 266: {productName: 'Stocks & Shares ISA', totalFunds: 11, fundDetails: Array(11)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 266 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 266 - ALL FUNDS CHECK: {totalFunds: 11, allFundNames: Array(11), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 266 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 266 historical funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 266 total dynamic funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:894 🔍 [Previous Funds] Product 266 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
IRRHistoryTab.tsx:945 🔍 [Previous Funds] Product 266 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 267: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 267 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 267 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 267 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 267 historical funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 267 total dynamic funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:959 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
IRRHistoryTab.tsx:969 🔄 [Previous Funds] Starting IRR calculations for 1 products
IRRHistoryTab.tsx:980 ⚠️ [Previous Funds] Skipping product 266 - no valid dates with main product valuation data
IRRHistoryTab.tsx:1010 🔍 [Previous Funds] Final state update: {newDataSize: 0, completedProductsCount: 0, completedProducts: Array(0), allCalculatedData: Array(0)}
IRRHistoryTab.tsx:1027 ⚠️ [Previous Funds] No data to update - newPreviousFundsIRRData is empty
IRRHistoryTab.tsx:526 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistoryTab.tsx:712 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
IRRHistoryTab.tsx:713 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 📊 Portfolio historical IRR fetched for product 267: {product_id: 267, portfolio_historical_irr: Array(8), count: 8}
 Fetched 8 historical IRR records for product 267
 Created 6 portfolio historical IRR records for product 267: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 Created data structure for product 267: {product_id: 267, product_name: 'Stocks & Shares ISA', portfolio_historical_irr: Array(6), funds_historical_irr: Array(2)}
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 8 dates: (8) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01', '2022-07-01', '2023-03-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
 🔍 [Previous Funds] Analyzing product 266: {productName: 'Stocks & Shares ISA', totalFunds: 11, fundDetails: Array(11)}
 🔍 [Previous Funds] Product 266 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 266 - ALL FUNDS CHECK: {totalFunds: 11, allFundNames: Array(11), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 266 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 266 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 266 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 266 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 266 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 267: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 267 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 267 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 267 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 267 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 267 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 🔄 [Previous Funds] Calculating IRR for product 266 with fund IDs: [1330]
 🔄 [Previous Funds] Product 266 valid dates (6): (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 📊 Portfolio historical IRR fetched for product 266: {product_id: 266, portfolio_historical_irr: Array(10), count: 10}
 Fetched 10 historical IRR records for product 266
 Created 6 portfolio historical IRR records for product 266: (6) [{…}, {…}, {…}, {…}, {…}, {…}]
 Created data structure for product 266: {product_id: 266, product_name: 'Stocks & Shares ISA', portfolio_historical_irr: Array(6), funds_historical_irr: Array(11)}
 Final processed historical IRR data: (2) [{…}, {…}]
 🔍 [IRR HISTORY DEBUG] Processed historical IRR data: {length: 2, sample: {…}}
 🎯 [REPORT DISPLAY] Calculating real-time total IRR for 12 portfolio funds: (12) [1324, 1325, 1326, 1327, 1333, 1328, 1329, 1332, 1331, 1323, 1335, 1334]
 🎯 [REPORT DISPLAY] Using end date for real-time IRR: 2025-09-30
 🚀 [IRR DEBUG] Starting getOptimizedIRRData with params: {portfolioFundIds: Array(12), endDate: '2025-09-30', includeHistorical: false}
 📋 [IRR DEBUG] Strategy 1: Checking for stored portfolio IRR
 ⚠️ [IRR DEBUG] No portfolio ID provided, skipping stored portfolio IRR lookup
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [SUMMARY TAB DEBUG] Sorting ISAs (ISA/JISA) products by owner order: {productsCount: 2, productOwnerOrder: Array(1), productOwnerOrderLength: 1, productNames: Array(2), productOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [SUMMARY TAB DEBUG] After sorting ISAs (ISA/JISA) products: {sortedProductNames: Array(2), sortedProductOwnerNames: Array(2)}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔄 [Validation] Computing validated dates for 2 products
 ✅ [Validation] Product 266 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 ✅ [Validation] Product 267 has 6 valid dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
 🔄 [Previous Funds] Starting calculation with 8 dates: (8) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01', '2022-07-01', '2023-03-01']
 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
 🔍 [Previous Funds] Analyzing product 266: {productName: 'Stocks & Shares ISA', totalFunds: 11, fundDetails: Array(11)}
 🔍 [Previous Funds] Product 266 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
 🔍 [Previous Funds] Product 266 - ALL FUNDS CHECK: {totalFunds: 11, allFundNames: Array(11), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
 🔍 [Previous Funds] Product 266 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 266 historical funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 266 total dynamic funds: {count: 1, funds: Array(1)}
 🔍 [Previous Funds] Product 266 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
 🔍 [Previous Funds] Product 266 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
 🔍 [Previous Funds] Analyzing product 267: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
 🔍 [Previous Funds] Product 267 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
 🔍 [Previous Funds] Product 267 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
 🔍 [Previous Funds] Product 267 inactive funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 267 historical funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Product 267 total dynamic funds: {count: 0, funds: Array(0)}
 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
 🔄 [Previous Funds] Starting IRR calculations for 1 products
 🔄 [Previous Funds] Calculating IRR for product 266 with fund IDs: [1330]
 🔄 [Previous Funds] Product 266 valid dates (6): (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
IRRHistoryTab.tsx:777 🔄 [Previous Funds] useEffect triggered {hasIrrHistoryData: true, irrHistoryDataLength: 2, hasProductSummaries: true, productSummariesLength: 2}
IRRHistoryTab.tsx:801 🔄 [Previous Funds] Starting calculation with 8 dates: (8) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01', '2022-07-01', '2023-03-01']
IRRHistoryTab.tsx:802 🔄 [Previous Funds] Using pre-computed validated dates for products: (2) [Array(2), Array(2)]
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 266: {productName: 'Stocks & Shares ISA', totalFunds: 11, fundDetails: Array(11)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 266 - Historical/Previous Funds check: {foundHistoricalFunds: 1, historicalFundsDetails: Array(1)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 266 - ALL FUNDS CHECK: {totalFunds: 11, allFundNames: Array(11), historicalFundsInAll: Array(0), previousFundsInAll: Array(1)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 266 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 266 historical funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 266 total dynamic funds: {count: 1, funds: Array(1)}
IRRHistoryTab.tsx:894 🔍 [Previous Funds] Product 266 - Found virtual Previous/Historical Funds with stored inactive funds: {virtualFund: {…}, inactiveFunds: Array(1), actualInactiveFundIds: Array(1)}
IRRHistoryTab.tsx:945 🔍 [Previous Funds] Product 266 extracted fund IDs: {originalCount: 1, extractedIds: Array(1), filteredCount: 1}
IRRHistoryTab.tsx:809 🔍 [Previous Funds] Analyzing product 267: {productName: 'Stocks & Shares ISA', totalFunds: 2, fundDetails: Array(2)}
IRRHistoryTab.tsx:825 🔍 [Previous Funds] Product 267 - Historical/Previous Funds check: {foundHistoricalFunds: 0, historicalFundsDetails: Array(0)}
IRRHistoryTab.tsx:843 🔍 [Previous Funds] Product 267 - ALL FUNDS CHECK: {totalFunds: 2, allFundNames: Array(2), historicalFundsInAll: Array(0), previousFundsInAll: Array(0)}
IRRHistoryTab.tsx:858 🔍 [Previous Funds] Product 267 inactive funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:870 🔍 [Previous Funds] Product 267 historical funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:875 🔍 [Previous Funds] Product 267 total dynamic funds: {count: 0, funds: Array(0)}
IRRHistoryTab.tsx:959 🔍 [Previous Funds] Final analysis: {totalProductsAnalyzed: 2, productsWithDynamicFunds: 1, dynamicFundDetails: Array(1)}
IRRHistoryTab.tsx:969 🔄 [Previous Funds] Starting IRR calculations for 1 products
IRRHistoryTab.tsx:984 🔄 [Previous Funds] Calculating IRR for product 266 with fund IDs: [1330]
IRRHistoryTab.tsx:985 🔄 [Previous Funds] Product 266 valid dates (6): (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:712 🔍 [Previous Funds IRR] Starting calculation for 1 inactive funds: [1330]
IRRHistoryTab.tsx:713 🔍 [Previous Funds IRR] Will attempt to calculate IRR for 6 dates: (6) ['2025-09-01', '2025-03-01', '2024-10-01', '2024-04-01', '2023-04-01', '2022-05-01']
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2025-09-01 (2025-09-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 Retrieved undefined stored fund IRRs
 📋 [IRR DEBUG] Strategy 3: Checking if IRR calculation is needed
 📋 [IRR DEBUG] Calculation decision factors: {noStoredIRR: true, includeHistorical: false, hasEndDate: true, needsCalculation: true, portfolioFundIdsLength: 12}
 🔄 [IRR DEBUG] Calculating IRR due to: {noStoredIRR: true, includeHistorical: false, hasEndDate: true}
 🔄 [IRR DEBUG] Calculating IRR using standardized endpoint: {portfolioFundIds: Array(12), endDate: '2025-09-30'}
 🔍 DEBUG: irrDataService portfolioFundIds being sent: (12) [1324, 1325, 1326, 1327, 1333, 1328, 1329, 1332, 1331, 1323, 1335, 1334]
 🔍 DEBUG: api.ts calculateStandardizedMultipleFundsIRR called with: {portfolioFundIds: Array(12), irrDate: '2025-09-30'}
 🔍 DEBUG: portfolioFundIds being sent to backend: (12) [1324, 1325, 1326, 1327, 1333, 1328, 1329, 1332, 1331, 1323, 1335, 1334]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-09-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-09-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-09-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2025-03-01 (2025-03-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔄 [IRR DEBUG] Raw API response from calculateStandardizedMultipleFundsIRR: {success: true, irr_percentage: 4.3, irr_decimal: 0.043304249501559866, calculation_date: '2025-09-30', portfolio_fund_ids: Array(12), …}
 🔄 [IRR DEBUG] Extracted IRR result: 4.3
 🔄 [IRR DEBUG] Calculated IRR result: 4.3
 ✅ [IRR DEBUG] Using calculated IRR as portfolio IRR: 4.3
 🎯 [IRR DEBUG] Final getOptimizedIRRData result: {portfolioIRR: 4.3, fundIRRs: {…}, historicalIRR: null, irrDate: '2025-09-30'}
 🎯 [REPORT DISPLAY] Real-time total IRR response: {portfolioIRR: 4.3, fundIRRs: {…}, historicalIRR: null, irrDate: '2025-09-30'}
 🎯 [REPORT DISPLAY] Set real-time total IRR: 4.3%
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2025-03-01: {success: true, irr_percentage: 4.4, irr_decimal: 0.04364601708137794, calculation_date: '2025-03-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2025-03-01: 4.4%
 🔍 [Previous Funds IRR] Calculating for date 2024-10-01 (2024-10-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-10-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.043429027738801196, calculation_date: '2024-10-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-10-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2024-04-01 (2024-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
IRRHistoryTab.tsx:526 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2024-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04306099281075859, calculation_date: '2024-04-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2024-04-01: 4.3%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2023-04-01 (2023-04-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
IRRHistoryTab.tsx:747 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
IRRHistoryTab.tsx:757 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
IRRHistoryTab.tsx:738 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [Previous Funds] Product 266 IRR calculation result: {mapSize: 6, dates: Array(6), values: Array(6), detailedValues: Array(6)}
 ✅ [Previous Funds] Successfully stored IRR data for product 266
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [Previous Funds] Product 266 IRR calculation result: {mapSize: 6, dates: Array(6), values: Array(6), detailedValues: Array(6)}
 ✅ [Previous Funds] Successfully stored IRR data for product 266
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [Previous Funds IRR] API response for 2023-04-01: {success: true, irr_percentage: 4.3, irr_decimal: 0.04331055615683521, calculation_date: '2023-04-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2023-04-01: 4.3%
 🔍 [Previous Funds IRR] Calculating for date 2022-05-01 (2022-05-01) with fund IDs: [1330]
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 🔍 [Previous Funds IRR] API response for 2022-05-01: {success: true, irr_percentage: 4.6, irr_decimal: 0.04590341142667942, calculation_date: '2022-05-01', portfolio_fund_ids: Array(1)}
 ✅ [Previous Funds IRR] Successfully calculated IRR for 2022-05-01: 4.6%
 🔍 [Previous Funds] Product 266 IRR calculation result: {mapSize: 6, dates: Array(6), values: Array(6), detailedValues: Array(6)}
 ✅ [Previous Funds] Successfully stored IRR data for product 266
 🔍 [Previous Funds] Final state update: {newDataSize: 1, completedProductsCount: 1, completedProducts: Array(1), allCalculatedData: Array(1)}
 ✅ [Previous Funds] State updated successfully with 1 products
 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
IRRHistoryTab.tsx:1912 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:1987 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
IRRHistoryTab.tsx:2050 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
IRRHistoryTab.tsx:526 🔍 [IRR HISTORY DEBUG] Chart data processing: {chartDataLength: 7, chartDataSample: {…}, productsForChartLength: 2}
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Global Income) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.1 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (BNY Mellon Multi-Asset Balanced) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 8.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Fidelity UK Smaller Companies) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 7.8 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (FTF Martin Currie UK Rising Dividends) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (LF Equity Income ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -16.9 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (RL Sustainable World Trust) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 6.4 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Stewart Investors Worldwide Leaders ) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
IRRHistoryTab.tsx:1781 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 5.7 for date: 2025-09-01
IRRHistoryTab.tsx:1749 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 40% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
IRRHistoryTab.tsx:1761 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
IRRHistoryTab.tsx:1771 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 2.4 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Vanguard Life Strategy 80% Equity A Acc) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: 10.9 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 266 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 266 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 266 using historical IRR: -4.6 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 266 - Raw historical IRR data: {productId: 266, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-10-01: 4.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2023-04-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 266 storing IRR for date 2022-05-01: 3.4% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-10-01: 4.2% (formatted: 4.2%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2023-04-01: 3.4% (formatted: 3.4%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 266 displaying IRR for date 2022-05-01: 3.4% (formatted: 3.4%)
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [CURRENT AVERAGE RETURN] Product 267 (PruFund Growth ISA) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 4.2 for date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 (Cash) processing: {productSelectedDates: Array(6), hasHistoricalIrr: true, historicalIrrLength: 6}
 🔍 [CURRENT AVERAGE RETURN] Product 267 latest selected date: 2025-09-01
 🔍 [CURRENT AVERAGE RETURN] Product 267 historical lookup result: {latestSelectedDate: '2025-09-01', historicalRecord: {…}, availableHistoricalDates: Array(6)}
 🎯 [CURRENT AVERAGE RETURN] Product 267 using historical IRR: 0 for date: 2025-09-01
 🔍 [PRODUCT IRR DEBUG] Product 267 - Raw historical IRR data: {productId: 267, selectedDatesFromReport: Array(5), normalizedSelectedDates: Array(5), rawRecordCount: 6, rawRecords: Array(6), …}
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2025-03-01: 4.1% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-10-01: 3.9% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2024-04-01: 3.8% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2023-04-01: 4.5% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DEBUG] Product 267 storing IRR for date 2022-05-01: 5.2% (from portfolio_historical_irr table)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2025-03-01: 4.1% (formatted: 4.1%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-10-01: 3.9% (formatted: 3.9%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2024-04-01: 3.8% (formatted: 3.8%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2023-04-01: 4.5% (formatted: 4.5%)
 🔍 [INDIVIDUAL CARD DISPLAY] Product 267 displaying IRR for date 2022-05-01: 5.2% (formatted: 5.2%)
 ✅ [GLOBAL IRR REQUEST MANAGER] Request completed successfully: irr_summary_266,267_2022-05-01,2022-07-01,2023-03-01,2023-04-01,2024-04-01,2024-10-01,2025-03-01,2025-09-01_none
 ✅ [IRR HISTORY SUMMARY] Data fetched successfully: {success: true, data: {…}}
 ✅ [IRR HISTORY SUMMARY] Data fetched successfully: {success: true, data: {…}}
 🔍 [IRR SUMMARY TABLE] Backend response analysis: {productRowsCount: 16, portfolioTotalsCount: 8, productRowsSample: Array(3), uniqueProductIdsInResponse: Array(2), requestedProductIds: Array(2)}
 ✅ [IRR SUMMARY TABLE] Received flat rows from backend: {totalRows: 16, expectedRows: 16, structure: 'flat'}
 🔍 [IRR SUMMARY TABLE] Setting table data: {productRows: Array(16), portfolioTotals: Array(8), dateHeaders: Array(8)}
 🔍 [IRR SUMMARY TABLE] Backend response analysis: {productRowsCount: 16, portfolioTotalsCount: 8, productRowsSample: Array(3), uniqueProductIdsInResponse: Array(2), requestedProductIds: Array(2)}
 ✅ [IRR SUMMARY TABLE] Received flat rows from backend: {totalRows: 16, expectedRows: 16, structure: 'flat'}
 🔍 [IRR SUMMARY TABLE] Setting table data: {productRows: Array(16), portfolioTotals: Array(8), dateHeaders: Array(8)}
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2025-09-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2025-09-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2025-09-01', irr_result: 4.4, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2025-09-01: 4.4
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2025-03-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2025-03-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2025-03-01', irr_result: 4.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2025-03-01: 4.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2024-10-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2024-10-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2024-10-01', irr_result: 4.2, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2024-10-01: 4.2
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2024-04-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2024-04-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2024-04-01', irr_result: 3.8, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2024-04-01: 3.8
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2023-04-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2023-04-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2023-04-01', irr_result: 3.4, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2023-04-01: 3.4
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2022-05-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2022-05-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2022-05-01', irr_result: 3.4, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2022-05-01: 3.4
 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2025-09-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2025-09-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2025-09-01', irr_result: 4.2, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2025-09-01: 4.2
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2025-03-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2025-03-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2025-03-01', irr_result: 4.1, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2025-03-01: 4.1
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2024-10-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2024-10-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2024-10-01', irr_result: 3.9, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2024-10-01: 3.9
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2024-04-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2024-04-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2024-04-01', irr_result: 3.8, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2024-04-01: 3.8
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2023-04-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2023-04-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2023-04-01', irr_result: 4.5, portfolio_id: undefined}
 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2023-04-01: 4.5
 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2022-05-01
 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2022-05-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2022-05-01', irr_result: 5.2, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2022-05-01: 5.2
IRRHistorySummaryTable.tsx:441 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 122816.95, weightedRiskSum: 534708.64, calculatedRisk: '4.4', productBreakdown: Array(2)}
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2025-09-01: 4.3% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2025-03-01: 4.1% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2024-10-01: 4.2% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2024-04-01: 3.8% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2023-04-01: 3.5% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2023-03-01: 3.1% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2022-07-01: 3.4% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2022-05-01: 3.5% (calculated from portfolios with valuations)
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 267, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
productTitleUtils.ts:45 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
productTitleUtils.ts:53 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productTitleUtils.ts:62 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
productTitleUtils.ts:36 🔍 [PRODUCT TITLE DEBUG] extractProductOwnerNickname called for product: {id: 266, product_name: 'Stocks & Shares ISA', product_owner_name: 'Mary Morrison', product_owners_count: 1}
productTitleUtils.ts:45 🔍 [PRODUCT TITLE DEBUG] Using product_owners array data
productTitleUtils.ts:53 🔍 [PRODUCT TITLE DEBUG] Single owner data: {id: 90, firstname: 'Mary', surname: 'Morrison', known_as: 'Mary'}
productTitleUtils.ts:62 🔍 [PRODUCT TITLE DEBUG] Using known_as: Mary
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 266, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 266, product_name: 'Stocks & Shares ISA', provider_name: 'Fidelity', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Fidelity - ISA - MORX009309
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2025-09-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2025-09-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2025-09-01', irr_result: 4.4, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2025-09-01: 4.4
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2025-03-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2025-03-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2025-03-01', irr_result: 4.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2025-03-01: 4.1
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2024-10-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2024-10-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2024-10-01', irr_result: 4.2, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2024-10-01: 4.2
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2024-04-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2024-04-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2024-04-01', irr_result: 3.8, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2024-04-01: 3.8
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2023-04-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2023-04-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2023-04-01', irr_result: 3.4, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2023-04-01: 3.4
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 266, date: 2022-05-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 266, date 2022-05-01: {product_id: 266, product_name: 'Stocks & Shares ISA', irr_date: '2022-05-01', irr_result: 3.4, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 266, date 2022-05-01: 3.4
productTitleUtils.ts:184 🔍 [PRODUCT TITLE DEBUG] generateEffectiveProductTitle called for product: {id: 267, customTitlesSize: 0, hasCustomTitle: false}
productTitleUtils.ts:197 🔍 [PRODUCT TITLE DEBUG] No custom title, generating default...
productTitleUtils.ts:139 🔍 [PRODUCT TITLE DEBUG] generateDefaultProductTitle called for product: {id: 267, product_name: 'Stocks & Shares ISA', provider_name: 'Prudential', omitOwner: true}
productTitleUtils.ts:169 🔍 [PRODUCT TITLE DEBUG] Owner omitted from title
productTitleUtils.ts:172 🔍 [PRODUCT TITLE DEBUG] Final title: Prudential - ISA - 556755
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2025-09-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2025-09-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2025-09-01', irr_result: 4.2, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2025-09-01: 4.2
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2025-03-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2025-03-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2025-03-01', irr_result: 4.1, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2025-03-01: 4.1
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2024-10-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2024-10-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2024-10-01', irr_result: 3.9, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2024-10-01: 3.9
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2024-04-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2024-04-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2024-04-01', irr_result: 3.8, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2024-04-01: 3.8
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2023-04-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2023-04-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2023-04-01', irr_result: 4.5, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2023-04-01: 4.5
IRRHistorySummaryTable.tsx:338 🔍 [IRR SUMMARY DEBUG] Looking for productId: 267, date: 2022-05-01
IRRHistorySummaryTable.tsx:339 🔍 [IRR SUMMARY DEBUG] Available productRows: (16) [{…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}, {…}]
IRRHistorySummaryTable.tsx:350 🔍 [IRR SUMMARY DEBUG] Found row for productId 267, date 2022-05-01: {product_id: 267, product_name: 'Stocks & Shares ISA', irr_date: '2022-05-01', irr_result: 5.2, portfolio_id: undefined}
IRRHistorySummaryTable.tsx:359 🔍 [IRR SUMMARY DEBUG] Returning IRR for productId 267, date 2022-05-01: 5.2
IRRHistorySummaryTable.tsx:441 🎯 [CLIENT GROUP RISK] Calculated client group weight risk: {productCount: 2, totalValue: 122816.95, weightedRiskSum: 534708.64, calculatedRisk: '4.4', productBreakdown: Array(2)}
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2025-09-01: 4.3% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2025-03-01: 4.1% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2024-10-01: 4.2% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2024-04-01: 3.8% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2023-04-01: 3.5% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2023-03-01: 3.1% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2022-07-01: 3.4% (calculated from portfolios with valuations)
IRRHistorySummaryTable.tsx:397 📊 [IRR SUMMARY] Using backend IRR for date 2022-05-01: 3.5% (calculated from portfolios with valuations)
