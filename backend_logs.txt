2025-08-27 11:02:20,443 - app.api.routes.analytics - INFO -    Fund Categories in totals: 51
2025-08-27 11:02:20,444 - app.api.routes.analytics - WARNING - ⚠️  Unassigned Provider: £27,311.00
2025-08-27 11:02:23,265 - app.api.routes.client_groups - INFO - Fetching ultra-optimized client data with proper advisor_id foreign key relationships
2025-08-27 11:02:23,276 - app.api.routes.client_groups - INFO - Retrieved 40 client groups from minimal summary view
2025-08-27 11:02:23,277 - app.api.routes.client_groups - INFO - Transformed 40 client groups successfully
2025-08-27 11:02:24,742 - app.api.routes.search - INFO - Performing global search with query: 'ste'
2025-08-27 11:02:24,781 - app.api.routes.search - INFO - Found 20 results for query: 'ste'
2025-08-27 11:02:27,631 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:27,634 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:27,639 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah
2025-08-27 11:02:27,639 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:27,643 - app.api.routes.client_groups - INFO - Retrieved 6 available advisors from profiles table
2025-08-27 11:02:27,653 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:27,655 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:27,657 - app.api.routes.client_groups - INFO - Retrieved 6 available advisors from profiles table
2025-08-27 11:02:27,713 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:27,714 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:27,774 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:27,779 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:27,782 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:27,786 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:27,788 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:27,789 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:27,790 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:28,825 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:28,828 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah 
2025-08-27 11:02:28,847 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:28,848 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:28,896 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:28,899 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:28,903 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:28,906 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:28,909 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:28,909 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:28,910 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:30,950 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:30,955 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah 
2025-08-27 11:02:30,967 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:30,968 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:31,013 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:31,017 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:31,020 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:31,023 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:31,025 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:31,026 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:31,027 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:35,066 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:35,069 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah 
2025-08-27 11:02:35,078 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:35,078 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:35,119 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:35,122 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:35,124 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:35,126 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:35,128 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:35,128 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:35,128 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:41,943 - app.api.routes.available_providers - INFO - Fetching available providers with skip=0, limit=100
2025-08-27 11:02:41,945 - app.api.routes.available_providers - INFO - Query returned 19 providers
2025-08-27 11:02:42,164 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:42,170 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:42,190 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:42,193 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:42,354 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:42,356 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:42,356 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah
2025-08-27 11:02:42,358 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:42,360 - app.api.routes.client_groups - INFO - Retrieved 6 available advisors from profiles table
2025-08-27 11:02:42,372 - app.api.routes.auth - INFO - Authentication attempt - Cookie Token: True, Header Token: False, Session: True
2025-08-27 11:02:42,374 - app.api.routes.auth - INFO - User authenticated via cookie token: 3
2025-08-27 11:02:42,376 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:42,376 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:42,377 - app.api.routes.client_groups - INFO - Retrieved 6 available advisors from profiles table
2025-08-27 11:02:42,417 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:42,422 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:42,424 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:42,425 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:42,427 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:42,427 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:42,428 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:43,466 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:43,468 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah 
2025-08-27 11:02:43,478 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:43,479 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:43,512 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:43,515 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:43,519 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:43,522 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:43,525 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:43,525 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:43,526 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant
2025-08-27 11:02:45,556 - app.api.routes.client_groups - INFO - Fetching complete client group details for ID: 75
2025-08-27 11:02:45,560 - app.api.routes.client_groups - INFO - Found client group: Downing, Stephen & Sarah 
2025-08-27 11:02:45,565 - app.api.routes.client_groups - INFO - Retrieved product owners for 4 products using ID-based matching
2025-08-27 11:02:45,566 - app.api.routes.client_groups - INFO - Found 4 unique portfolios
2025-08-27 11:02:45,608 - app.api.routes.client_groups - INFO - Fetched 28 funds across 4 portfolios
2025-08-27 11:02:45,611 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 254 (portfolio 267): 3.8%
2025-08-27 11:02:45,614 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 253 (portfolio 266): 4.3%
2025-08-27 11:02:45,616 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 255 (portfolio 268): 4.7%
2025-08-27 11:02:45,618 - app.api.routes.client_groups - INFO - Retrieved latest portfolio IRR for product 257 (portfolio 270): 2.6%
2025-08-27 11:02:45,619 - app.api.routes.client_groups - INFO - Processed 4 products with complete fund data
2025-08-27 11:02:45,620 - app.api.routes.client_groups - INFO - Found 2 unique product owners across all products
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 426, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 84, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\applications.py", line 1106, in __call__
    await super().__call__(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\applications.py", line 122, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 184, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\errors.py", line 162, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\cors.py", line 83, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 79, in __call__
    raise exc
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 68, in __call__
    await self.app(scope, receive, sender)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 20, in __call__
    raise e
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\middleware\asyncexitstack.py", line 17, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 718, in __call__
    await route.handle(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 276, in handle 
    await self.app(scope, receive, send)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\routing.py", line 66, in app     
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\fastapi\routing.py", line 303, in app      
    response = actual_response_class(content, **response_args)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 196, in __init__
    super().__init__(content, status_code, headers, media_type, background)
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 55, in __init__
    self.body = self.render(content)
                ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\Documents\kingstons_portal\backend\venv\Lib\site-packages\starlette\responses.py", line 199, in render
    return json.dumps(
           ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\jacob\AppData\Local\Programs\Python\Python311\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
ValueError: Out of range float values are not JSON compliant